/*!
 * HERE (c) 2016.
 * All rights reserved.
 * Data Lens JavaScript API
 * http://datalens.here.com
 * v2.0.0-19
 */
!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";t.exports={ObjectLayer:r(36),Provider:r(2),QueryProvider:r(37),QueryTileProvider:r(38),SpatialTileProvider:r(16),Service:r(3),RasterLayer:r(12),HeatmapLayer:r(29),SpatialLayer:r(44)};var n=r(1)();n.datalens=t.exports},function(t,e){"use strict";t.exports=function(){var t=window.H;if(!t)throw new Error("HERE Maps API core libraries where not loaded");return t}},function(t,e,r){"use strict";var n=r(1)(),i=function(t,e){this.data_=t,n.map.provider.Provider.prototype.constructor.call(this,e)};i.prototype=Object.create(n.map.provider.Provider.prototype),i.prototype.constructor=i,i.prototype.setData=function(t){this.data_=t,this.dispatchEvent("update")},i.prototype.getData=function(){return this.data_},t.exports=i},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){var r=t.format(t);if(e&&e.length){var n=e[y(r)%e.length];t.host=n+"."+t.host,r=t.format(t)}return r}function o(t){if(t.access_token&&t.password_)throw new Error("\n          Service: only one of access_token or password\n          can be set in the options\n            ");return t.access_token?"Bearer "+t.access_token:t.password_?"Basic "+window.btoa(":"+t.password_):null}function a(t){if(!t)throw new Error("\n                Service:  your Service instance must be passed as a first\n                parameter of H.service.Platform#configure()\n        ")}function s(t){if("string"!=typeof t||0===t.length)throw new TypeError("Service:  queryId must be a non-empty string")}function u(t){try{return JSON.parse(t)}catch(e){throw new Error("\n          Service:  Cannot convert the string into JSON: "+t+"\n          ")}}function c(t,e){var r=this;return e instanceof v&&this.options_.access_token&&this.options_.refresh_token&&e.code===d.UNAUTHORIZED&&e.msg===g?this.request("POST",b.refreshToken,{},{access_token:this.options_.access_token,refresh_token:this.options_.refresh_token}).then(function(e){return r.options_.access_token=e.access_token,r.options_.refresh_token=e.refresh_token,r.request.apply(r,n(t))}):m.reject(e)}function l(t){var e=t.url,r=t.method,n=t.headers,i=t.body,o=String(n["content-type"]),a=void 0;if(o.match("application/json")?a=u(i):e.match(".pbf")&&o.match("application/octet-stream")&&(a=new Uint8Array(i)),t.statusCode===d.OK){if(!a)throw new Error("Service: unsupported content-type "+o+" when "+r+" "+e);return a}throw new v(t.statusCode,a||{msg:String(i)})}var f=r(70),h=r(58),p=r(41),d=r(7),v=r(40),y=r(21),m=r(5),_={subDomain:"datalens",version:"v1",access_token:null,refresh_token:null,domainSharding:["aa","bb","cc","dd"],baseUrl:null,password_:null,xhr_:null},g="token expired",b={queries:"queries",data:"data",layers:"layers",stats:"stats",refreshToken:"sign_in/refresh"},w="cit.datalens.api.here.com",T=function(t){this.url_=null,this.options_={},this.cache_={},Object.assign(this.options_,_,t)};T.prototype.request=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments[4],u=arguments[5],d=void 0,v=void 0,y=o(this.options_),m=void 0;return a(this.url_,t,e),d=h(this.url_),Object.assign(d.query,r),d.pathname=d.pathname+"/"+e,m={useXDR:!0,url:"GET"===t?i(d,this.options_.domainSharding):f.format(d),method:t},e.match(/.pbf$/)&&(m.responseType="arraybuffer"),n&&(m.body=JSON.stringify(n)),y&&(m.headers={Authorization:y}),this.options_.xhr_&&(m.xhr=new this.options_.xhr_),v=p.request(m,this.cache_).then(l).catch(c.bind(this,[].slice.call(arguments,0,4))),s&&(v=v.then(s,u)),v},T.prototype.fetchQueryData=function(t,e,r,n){return s(t,T.prototype.fetchQueryData,0),this.request("GET",b.queries+"/"+t+"/"+b.data,e,null,r,n)},T.prototype.fetchQueryStats=function(t,e,r,n){if(s(t,T.prototype.fetchQueryStats,0),!e||!e.stats)throw new Error("\n            Service: statsQuery JSON must contain a stats key\n        ");return this.request("POST",b.queries+"/"+t+"/"+b.stats,{},e,r,n)},T.prototype.fetchLayer=function(t,e,r,n){return this.request("GET",b.layers+"/"+t,e,null,r,n)},T.prototype.fetchLayerTile=function(t,e,r,n,i,o,a){return this.request("GET",b.layers+"/"+t+"/"+n+"/"+e+"/"+r+".pbf",i,null,o,a)},T.prototype.setTokens=function(t,e){switch(arguments.length){case 2:this.options_.refresh_token=e,this.options_.access_token=t;break;case 1:this.options_.access_token=t;break;default:throw new Error("Service: accessToken must be specified")}},T.prototype.configure=function(t,e,r,n,i){return this.options_.baseUrl?this.url_=f.parse(this.options_.baseUrl.toString(),!0):(this.url_=f.parse(i.toString(),!0),n?this.url_.host=w:this.url_.host=this.options_.subDomain+"."+this.url_.host),this.url_.pathname=this.options_.version,this.url_.search=null,this.url_.query.app_id=t,this.url_.query.app_code=e,delete this.url_.query.xnlp,this},t.exports=T},function(t,e,r){"use strict";function n(t){if(!(t instanceof f.map.AbstractMarker))throw new Error("Layer: You can set icon only for Markers")}function i(t){if(!(t instanceof f.map.Icon))throw new Error("Layer: icon is not instance of H.map.Icon")}function o(t){if(!(t instanceof f.map.Spatial))throw new Error("Layer: You can set style only for Spatials")}function a(t,e){for(var r in e)switch(r){case"icon":n(t),i(e.icon),t.setIcon(e.icon);break;case"zIndex":t.setZIndex(e.zIndex);break;case"style":o(t),t.setStyle(e.style);break;case"arrows":o(t),t.setArrows(e.arrows);break;default:throw new Error("ObjectLayer: unknown style property "+r)}}function s(t){var e={};for(var r in t)e[r]=p.scaleQuantile().domain(t[r]).range(t[r]);return e}function u(){return{}}function c(t,e){return new f.map.Group({min:e-.5,max:e+.5,objects:t,data:{zoom:e}})}function l(t){for(var e in t.clusterProvidersByZoom_)t.clusterProvidersByZoom_[e].dispose();t.clusterProvidersByZoom_={}}var f=r(1)(),h=r(33),p=r(18),d=r(6).bind(null,"ObjectLayer"),v="DEFAULT_STATE",y=function t(e,r){this.options_={},Object.assign(this.options_,m,r),this.styleCache_=null,this.dataDomainsScale_=null,this.options_.dataDomains&&(this.dataDomainsScale_=s(this.options_.dataDomains),this.styleCache_=new t.StyleCache(this.options_.styleCacheSize)),this.dataProvider_=e,this.onProviderUpdate_=this.onProviderUpdate_.bind(this),this.dataProvider_.addEventListener("update",this.onProviderUpdate_),this.clusterProvidersByZoom_={},this.objectProvider_=new t.ObjectProvider(e,this.onDataRequest_.bind(this)),f.map.layer.Layer.call(this,this.options_)};y.prototype=Object.create(f.map.layer.Layer.prototype),y.prototype.constructor=y,y.prototype.getProvider=function(){return this.objectProvider_},y.prototype.onProviderUpdate_=function(){this.objectProvider_.dispatchEvent("update")},y.prototype.getMapObjectFromData_=function(t,e){var r=this.options_.rowToMapObject,n=r(e,t);if(!(n instanceof f.map.Object))throw new TypeError("ObjectLayer: rowToMapObject should return H.map.Object\n            if you want to filter/aggregate objects,\n            use dataToRows callback");return n.setData(e),this.applyStyleToObject(t,n,v),n},y.prototype.getClusterProvider_=function(t){var e=this.options_.clustering.options,r=this.clusterProvidersByZoom_[t],n=void 0;if(!r){n="function"==typeof e?e(t):e;var i=this.getMapObjectFromData_.bind(this,t);r=new f.clustering.Provider([],{min:t,max:t,clusteringOptions:n,theme:{getClusterPresentation:i,getNoisePresentation:i}}),this.clusterProvidersByZoom_[t]=r,r.setParentEventTarget(this.objectProvider_)}return r},y.prototype.onDataRequest_=function(t,e,r,n){var i=Math.floor(e);if(this.options_.clustering){var o=this.getClusterProvider_(i);return o.requestMarkers(t,e,r,n)}return f.map.provider.LocalObjectProvider.prototype.requestMarkers.call(this.objectProvider_,t,e,r,n)},y.prototype.getDataForProvider_=function(t,e){var r=this,n=this.options_,i=n.dataToRows,o=n.clustering,a=i(e);if(!Array.isArray(a))throw new TypeError("ObjectLayer: dataToRows must return Array");if(!a.length)return null;if(o)return a.map(function(e){var r=o.rowToDataPoint(e,t);if(!(r instanceof f.clustering.DataPoint))throw new Error("ObjectLayer: rowToDataPoint should return\n                    H.clustering.DataPoint");return r.data=e,r});var s=a.map(function(e){return r.getMapObjectFromData_(t,e)});return c(s,t)},y.prototype.applyStyleToObject=function(t,e,r){var n=e.getData(),i=this.options_.rowToStyle;if(!this.dataDomainsScale_)return a(e,i(n,t,r));var o=[r,t],s=[];for(var u in this.dataDomainsScale_){var c=this.dataDomainsScale_[u](n[u]);o.push(c),s[u]=c}var l=o.join();this.styleCache_.get(l)||this.styleCache_.add(l,this.options_.rowToStyle(s,t,r),1),a(e,this.styleCache_.get(l))},y.prototype.redraw=function(){this.styleCache_&&this.styleCache_.removeAll(),this.options_.clustering?(l(this),this.objectProvider_.dispatchEvent("update")):this.objectProvider_.getRootGroup().removeAll()},y.prototype.dispose=function(){l(this),this.objectProvider_.dispose(),this.styleCache_&&this.styleCache_.removeAll(),this.dataProvider_.removeEventListener("update",this.onProviderUpdate_)},y.DEFAULT_STATE=v,y.ObjectProvider=h,y.defaultDataToRows=d,y.defaultRowToStyle=u,y.StyleCache=f.util.Cache;var m={rowToMapObject:null,dataToRows:function(){return y.defaultDataToRows.apply(y,arguments)},dataDomains:null,rowToStyle:function(){return y.defaultRowToStyle.apply(y,arguments)},styleCacheSize:2048};t.exports=y},function(t,e,r){"use strict";var n=r(46);n.config({cancellation:!0}),t.exports=n},function(t,e){"use strict";t.exports=function(t,e){if(e&&Array.isArray(e.rows)&&Array.isArray(e.columns)){for(var r=[],n=e.rows.length,i=e.columns.length,o=0;o<n;o++){for(var a=e.rows[o],s={},u=0;u<i;u++)s[e.columns[u]]=a[u];r.push(s)}return r}throw new TypeError(t+".defaultDataToRows: data must have rows and columns;\n              if not, you must define a custom options.dataToRows callback")}},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",424:"Failed Dependency",429:"Too Many Requests",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not Supported",507:"Insufficient Storage",CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUESTED_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,UNPROCESSABLE_ENTITY:422,FAILED_DEPENDENCY:424,TOO_MANY_REQUESTS:429,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,INSUFFICIENT_STORAGE:507}},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(67).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=c++,n=!(arguments.length<2)&&s.call(arguments,1);return u[r]=!0,o(function(){u[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(e,r(8).setImmediate,r(8).clearImmediate)},function(t,e){"use strict";var r=function t(e){this.size_=e;var r=t.stores_;r[e]||(r[e]=[]),this.store_=r[e]};r.prototype.pop=function(){var t=this.store_.pop();return t?t.getContext("2d").clearRect(0,0,this.size_,this.size_):(t=window.document.createElement("canvas"),t.width=this.size_,t.height=this.size_),t},r.prototype.push=function(t){if(t.width!==this.size_||t.height!==this.size_)throw new Error("CanvasPool: canvas size is incorrect");this.store_.push(t)},r.stores_={},t.exports=r},function(t,e){"use strict";t.exports={SUM:"SUM",AVERAGE:"AVERAGE"}},function(t,e){"use strict";t.exports={DB:"DB",LINEAR:"LINEAR",LOG:"LOG"}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(1)(),o=r(39),a=r(6),s=function t(e,r){var o=Object.assign({},u,r);if(!(e instanceof i.map.provider.TileProvider))throw new TypeError("RasterLayer: the provider must be TileProvider");if(["function","number"].indexOf(n(o.buffer))<0)throw new TypeError("RasterLayer: buffer must be a number or a function");if("function"!=typeof o.rowToTilePoint)throw new TypeError("RasterLayer: rowToTilePoint must be a function");if("function"!=typeof o.dataToRows)throw new TypeError("RasterLayer: dataToRows must be a function");if("function"!=typeof o.renderTile)throw new TypeError("RasterLayer: renderTile must be a function");this.tileProvider_=new t.TileProvider_(e,o),i.map.layer.TileLayer.call(this,this.tileProvider_,o)};s.prototype=Object.create(i.map.layer.TileLayer.prototype),s.prototype.constructor=s,s.prototype.dispose=function(){this.tileProvider_.dispose(),i.map.layer.TileLayer.prototype.dispose.call(this)},s.prototype.redraw=function(){this.tileProvider_.reload()},s.TileProvider_=o,s.defaultDataToRows=a.bind(null,"RasterLayer"),s.defaultRenderTile=function(t,e){for(var r=e.getContext("2d"),n=2*window.devicePixelRatio,i=0;i<t.length;i++){var o=t[i];r.fillRect(o.x,o.y,n,n)}};var u={dataToRows:s.defaultDataToRows,renderTile:s.defaultRenderTile,buffer:0};t.exports=s},function(t,e,r){"use strict";function n(t,e){var r=s[e];void 0===r&&(r=a,s[e]=r,a++),t.colorCode=r}var i=r(1)(),o=r(15),a=1,s={},u=function(t){i.map.Object.call(this,t);var e=t.id,r=t.provider,o=t.feature,a=t.tileKey;this.feature_=o,this.id=e,n(this,e),this.tileKey=a,this.setParentEventTarget(r)};u.prototype=Object.create(i.map.Object.prototype),u.prototype.constructor=u,u.prototype.getFeature=function(){return this.feature_.toGeoJSON()},u.prototype.render=function(t){var e=this.feature_.type;switch(e){case 1:o.drawPoint(t,this.feature_.geometry);break;case 2:o.drawLine(t,this.feature_.geometry);break;case 3:o.drawPolygon(t,this.feature_.geometry);break;default:throw new Error("SpatialLayer: unsupported geometry type "+e)}},t.exports=u},function(t,e){"use strict";t.exports=function(){return{lineJoin:"round",lineCap:"round",strokeColor:"black",lineWidth:1*window.devicePixelRatio,fillColor:"grey"}}},function(t,e){"use strict";function r(t,e){t.beginPath();for(var r=0;r<e.length;r++){var n=e[r],i=n[n.length-1];t.moveTo(i.x,i.y);for(var o=0;o<n.length;o++){var a=n[o];t.lineTo(a.x,a.y)}}t.closePath(),t.stroke(),t.fill()}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=0;i<n.length;i++){var o=n[i];i>0&&t.lineTo(o.x,o.y)}t.stroke()}}function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.beginPath(),t.arc(e.x,e.y,r,0,2*Math.PI,!1),t.stroke(),t.fill()}function o(t){var e=t;e>>>=0;var r=255&e,n=(65280&e)>>>8,i=(16711680&e)>>>16;return"rgb("+[i,n,r].join(",")+")"}function a(t){return(t[0]<<16)+(t[1]<<8)+t[2]}function s(t){for(var e=void 0,r=0;r<t.length;r+=4)if(0!==t[r]||0!==t[r+1]||0!==t[r+2]||0!==t[r+3]){if(255!==t[r+3])return!0;if(e){if(t[r]!==e[0]||t[r+1]!==e[1]||t[r+2]!==e[2])return!0}else e=t.slice(r,r+3)}return!1}t.exports={drawPolygon:r,drawLine:n,drawPoint:i,intToRGB:o,RGBToInt:a,isAntialiased:s}},function(t,e,r){"use strict";var n=r(1)(),i=r(3),o=r(62),a=r(71).VectorTile,s={tileCacheSize:512,layerName:null,queryParams:null},u=function t(e,r){if(!(e instanceof i))throw new n.lang.InvalidArgumentError(t,0,"SpatialTileProvider: service must be an instance of\n            H.datalens.Service");this.options_={},Object.assign(this.options_,s,r),this.service_=e,this.cache_=new n.util.Cache(this.options_.tileCacheSize),n.map.provider.RemoteTileProvider.call(this,this.options_)};u.prototype=Object.create(n.map.provider.RemoteTileProvider.prototype),u.prototype.constructor=u,u.prototype.getCache=function(){return this.cache_},u.prototype.requestInternal=function(t,e,r,n,i){var a=this.options_.layerName,s=this.options_.queryParams||{},c=this.service_.fetchLayerTile(a,t,e,r,s);return c.then(function(t){var e=new u.VectorTile(new o(t)),r=e.layers[a],i=void 0;if(r){for(var s=[],c=0;c<r.length;c++){var l=r.feature(c);l.geometry=l.loadGeometry(),s.push(l)}i={layer:r,features:s}}else i={layer:null,features:[]};n(i)},i),c},u.prototype.setLayerName=function(t){this.options_.layerName=t,n.map.provider.RemoteTileProvider.prototype.reload.call(this)},u.prototype.setQueryParams=function(t){this.options_.queryParams=t,n.map.provider.RemoteTileProvider.prototype.reload.call(this)},u.prototype.reload=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.map.provider.RemoteTileProvider.prototype.reload.call(this,t)},u.VectorTile=a,t.exports=u},function(t,e,r){!function(t,r){r(e)}(this,function(t){"use strict";function e(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function r(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function n(){}function i(t){var e;return t=(t+"").trim().toLowerCase(),(e=P.exec(t))?(e=parseInt(e[1],16),new c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=A.exec(t))?o(parseInt(e[1],16)):(e=F.exec(t))?new c(e[1],e[2],e[3],1):(e=O.exec(t))?new c(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=R.exec(t))?a(e[1],e[2],e[3],e[4]):(e=D.exec(t))?a(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=L.exec(t))?l(e[1],e[2]/100,e[3]/100,1):(e=N.exec(t))?l(e[1],e[2]/100,e[3]/100,e[4]):I.hasOwnProperty(t)?o(I[t]):"transparent"===t?new c(NaN,NaN,NaN,0):null}function o(t){return new c(t>>16&255,t>>8&255,255&t,1)}function a(t,e,r,n){return n<=0&&(t=e=r=NaN),new c(t,e,r,n)}function s(t){return t instanceof n||(t=i(t)),t?(t=t.rgb(),new c(t.r,t.g,t.b,t.opacity)):new c}function u(t,e,r,n){return 1===arguments.length?s(t):new c(t,e,r,null==n?1:n)}function c(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function l(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new p(t,e,r,n)}function f(t){if(t instanceof p)return new p(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=i(t)),!t)return new p;if(t instanceof p)return t;t=t.rgb();var e=t.r/255,r=t.g/255,o=t.b/255,a=Math.min(e,r,o),s=Math.max(e,r,o),u=NaN,c=s-a,l=(s+a)/2;return c?(u=e===s?(r-o)/c+6*(r<o):r===s?(o-e)/c+2:(e-r)/c+4,c/=l<.5?s+a:2-s-a,u*=60):c=l>0&&l<1?0:u,new p(u,c,l,t.opacity)}function h(t,e,r,n){return 1===arguments.length?f(t):new p(t,e,r,null==n?1:n)}function p(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function d(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}function v(t){if(t instanceof m)return new m(t.l,t.a,t.b,t.opacity);if(t instanceof S){var e=t.h*U;return new m(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof c||(t=s(t));var r=w(t.r),n=w(t.g),i=w(t.b),o=_((.4124564*r+.3575761*n+.1804375*i)/q),a=_((.2126729*r+.7151522*n+.072175*i)/V),u=_((.0193339*r+.119192*n+.9503041*i)/B);return new m(116*a-16,500*(o-a),200*(a-u),t.opacity)}function y(t,e,r,n){return 1===arguments.length?v(t):new m(t,e,r,null==n?1:n)}function m(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}function _(t){return t>Q?Math.pow(t,1/3):t/G+Y}function g(t){return t>X?t*t*t:G*(t-Y)}function b(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function w(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function T(t){if(t instanceof S)return new S(t.h,t.c,t.l,t.opacity);t instanceof m||(t=v(t));var e=Math.atan2(t.b,t.a)*H;return new S(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function x(t,e,r,n){return 1===arguments.length?T(t):new S(t,e,r,null==n?1:n)}function S(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}function E(t){if(t instanceof k)return new k(t.h,t.s,t.l,t.opacity);t instanceof c||(t=s(t));var e=t.r/255,r=t.g/255,n=t.b/255,i=(rt*n+tt*e-et*r)/(rt+tt-et),o=n-i,a=(K*(r-i)-J*o)/Z,u=Math.sqrt(a*a+o*o)/(K*i*(1-i)),l=u?Math.atan2(a,o)*H-120:NaN;return new k(l<0?l+360:l,u,i,t.opacity)}function M(t,e,r,n){return 1===arguments.length?E(t):new k(t,e,r,null==n?1:n)}function k(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}var j=.7,C=1/j,P=/^#([0-9a-f]{3})$/,A=/^#([0-9a-f]{6})$/,F=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,O=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,R=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,D=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,L=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,N=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e(n,i,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),e(c,u,r(n,{brighter:function(t){return t=null==t?C:Math.pow(C,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?j:Math.pow(j,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),e(p,h,r(n,{brighter:function(t){return t=null==t?C:Math.pow(C,t),new p(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?j:Math.pow(j,t),new p(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new c(d(t>=240?t-240:t+120,i,n),d(t,i,n),d(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var U=Math.PI/180,H=180/Math.PI,z=18,q=.95047,V=1,B=1.08883,Y=4/29,X=6/29,G=3*X*X,Q=X*X*X;e(m,y,r(n,{brighter:function(t){return new m(this.l+z*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new m(this.l-z*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return t=V*g(t),e=q*g(e),r=B*g(r),new c(b(3.2404542*e-1.5371385*t-.4985314*r),b(-.969266*e+1.8760108*t+.041556*r),b(.0556434*e-.2040259*t+1.0572252*r),this.opacity)}})),e(S,x,r(n,{brighter:function(t){return new S(this.h,this.c,this.l+z*(null==t?1:t),this.opacity)},darker:function(t){return new S(this.h,this.c,this.l-z*(null==t?1:t),this.opacity)},rgb:function(){return v(this).rgb()}}));var W=-.14861,$=1.78277,J=-.29227,Z=-.90649,K=1.97294,tt=K*Z,et=K*$,rt=$*J-Z*W;e(k,M,r(n,{brighter:function(t){return t=null==t?C:Math.pow(C,t),new k(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?j:Math.pow(j,t),new k(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*U,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),i=Math.sin(t);return new c(255*(e+r*(W*n+$*i)),255*(e+r*(J*n+Z*i)),255*(e+r*(K*n)),this.opacity)}}));var nt="0.4.2";t.version=nt,t.color=i,t.rgb=u,t.hsl=h,t.lab=y,t.hcl=x,t.cubehelix=M})},function(t,e,r){!function(t,n){n(e,r(47),r(48),r(50),r(49),r(19),r(51),r(17))}(this,function(t,e,r,n,i,o,a,s){"use strict";function u(){function t(t){var r=t+"",a=e.get(r);if(!a){if(o!==st)return o;e.set(r,a=n.push(t))}return i[(a-1)%i.length]}var e=r.map(),n=[],i=[],o=st;return t.domain=function(i){if(!arguments.length)return n.slice();n=[],e=r.map();for(var o,a,s=-1,u=i.length;++s<u;)e.has(a=(o=i[s])+"")||e.set(a,n.push(o));return t},t.range=function(e){return arguments.length?(i=at.call(e),t):i.slice()},t.unknown=function(e){return arguments.length?(o=e,t):o},t.copy=function(){return u().domain(n).range(i).unknown(o)},t}function c(){function t(){var t=o().length,i=s[1]<s[0],u=s[i-0],c=s[1-i];r=(c-u)/Math.max(1,t-f+2*h),l&&(r=Math.floor(r)),u+=(c-u-r*(t-f))*p,n=r*(1-f),l&&(u=Math.round(u),n=Math.round(n));var d=e.range(t).map(function(t){return u+r*t});return a(i?d.reverse():d)}var r,n,i=u().unknown(void 0),o=i.domain,a=i.range,s=[0,1],l=!1,f=0,h=0,p=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(o(e),t()):o()},i.range=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s.slice()},i.rangeRound=function(e){return s=[+e[0],+e[1]],l=!0,t()},i.bandwidth=function(){return n},i.step=function(){return r},i.round=function(e){return arguments.length?(l=!!e,t()):l},i.padding=function(e){return arguments.length?(f=h=Math.max(0,Math.min(1,e)),t()):f},i.paddingInner=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},i.paddingOuter=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},i.align=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),t()):p},i.copy=function(){return c().domain(o()).range(s).round(l).paddingInner(f).paddingOuter(h).align(p)},t()}function l(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return l(e())},t}function f(){return l(c().paddingInner(1))}function h(t){return function(){return t}}function p(t){return+t}function d(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:h(e)}function v(t){return function(e,r){var n=t(e=+e,r=+r);return function(t){return t<=e?0:t>=r?1:n(t)}}}function y(t){return function(e,r){var n=t(e=+e,r=+r);return function(t){return t<=0?e:t>=1?r:n(t)}}}function m(t,e,r,n){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=r(o,i),a=n(s,a)):(i=r(i,o),a=n(a,s)),function(t){return a(i(t))}}function _(t,r,n,i){var o=Math.min(t.length,r.length)-1,a=new Array(o),s=new Array(o),u=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++u<o;)a[u]=n(t[u],t[u+1]),s[u]=i(r[u],r[u+1]);return function(r){var n=e.bisect(t,r,1,o)-1;return s[n](a[n](r))}}function g(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function b(t,e){function r(){var r=Math.min(s.length,u.length)>2?_:m;return o=r(s,u,l?v(t):t,c),a=r(u,s,d,l?y(e):e),i}function i(t){return o(+t)}var o,a,s=ut,u=ut,c=n.interpolate,l=!1;return i.invert=function(t){return a(+t)},i.domain=function(t){return arguments.length?(s=ot.call(t,p),r()):s.slice()},i.range=function(t){return arguments.length?(u=at.call(t),r()):u.slice()},i.rangeRound=function(t){return u=at.call(t),c=n.interpolateRound,r()},i.clamp=function(t){return arguments.length?(l=!!t,r()):l},i.interpolate=function(t){return arguments.length?(c=t,r()):c},r()}function w(t,r,n){var o,a=t[0],s=t[t.length-1],u=e.tickStep(a,s,null==r?10:r);switch(n=i.formatSpecifier(null==n?",f":n),n.type){case"s":var c=Math.max(Math.abs(a),Math.abs(s));return null!=n.precision||isNaN(o=i.precisionPrefix(u,c))||(n.precision=o),i.formatPrefix(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=i.precisionRound(u,Math.max(Math.abs(a),Math.abs(s))))||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=i.precisionFixed(u))||(n.precision=o-2*("%"===n.type))}return i.format(n)}function T(t){var r=t.domain;return t.ticks=function(t){var n=r();
return e.ticks(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,e){return w(r(),t,e)},t.nice=function(n){var i=r(),o=i.length-1,a=null==n?10:n,s=i[0],u=i[o],c=e.tickStep(s,u,a);return c&&(c=e.tickStep(Math.floor(s/c)*c,Math.ceil(u/c)*c,a),i[0]=Math.floor(s/c)*c,i[o]=Math.ceil(u/c)*c,r(i)),t},t}function x(){var t=b(d,n.interpolateNumber);return t.copy=function(){return g(t,x())},T(t)}function S(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(r){return arguments.length?(e=ot.call(r,p),t):e.slice()},t.copy=function(){return S().domain(e)},T(t)}function E(t,e){t=t.slice();var r,n=0,i=t.length-1,o=t[n],a=t[i];return a<o&&(r=n,n=i,i=r,r=o,o=a,a=r),t[n]=e.floor(o),t[i]=e.ceil(a),t}function M(t,e){return(e=Math.log(e/t))?function(r){return Math.log(r/t)/e}:h(e)}function k(t,e){return t<0?function(r){return-Math.pow(-e,r)*Math.pow(-t,1-r)}:function(r){return Math.pow(e,r)*Math.pow(t,1-r)}}function j(t){return isFinite(t)?+("1e"+t):t<0?0:t}function C(t){return 10===t?j:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function P(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function A(t){return function(e){return-t(-e)}}function F(){function t(){return a=P(o),s=C(o),n()[0]<0&&(a=A(a),s=A(s)),r}var r=b(M,k).domain([1,10]),n=r.domain,o=10,a=P(10),s=C(10);return r.base=function(e){return arguments.length?(o=+e,t()):o},r.domain=function(e){return arguments.length?(n(e),t()):n()},r.ticks=function(t){var r,i=n(),u=i[0],c=i[i.length-1];(r=c<u)&&(p=u,u=c,c=p);var l,f,h,p=a(u),d=a(c),v=null==t?10:+t,y=[];if(!(o%1)&&d-p<v){if(p=Math.round(p)-1,d=Math.round(d)+1,u>0){for(;p<d;++p)for(f=1,l=s(p);f<o;++f)if(h=l*f,!(h<u)){if(h>c)break;y.push(h)}}else for(;p<d;++p)for(f=o-1,l=s(p);f>=1;--f)if(h=l*f,!(h<u)){if(h>c)break;y.push(h)}r&&y.reverse()}else y=e.ticks(p,d,Math.min(d-p,v)).map(s);return y},r.tickFormat=function(t,e){if(null==e&&(e=10===o?".0e":","),"function"!=typeof e&&(e=i.format(e)),t===1/0)return e;null==t&&(t=10);var n=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/s(Math.round(a(t)));return r*o<o-.5&&(r*=o),r<=n?e(t):""}},r.nice=function(){return n(E(n(),{floor:function(t){return s(Math.floor(a(t)))},ceil:function(t){return s(Math.ceil(a(t)))}}))},r.copy=function(){return g(r,F().base(o))},r}function O(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function R(){function t(t,e){return(e=O(e,r)-(t=O(t,r)))?function(n){return(O(n,r)-t)/e}:h(e)}function e(t,e){return e=O(e,r)-(t=O(t,r)),function(n){return O(t+e*n,1/r)}}var r=1,n=b(t,e),i=n.domain;return n.exponent=function(t){return arguments.length?(r=+t,i(i())):r},n.copy=function(){return g(n,R().exponent(r))},T(n)}function D(){return R().exponent(.5)}function L(){function t(){var t=0,a=Math.max(1,i.length);for(o=new Array(a-1);++t<a;)o[t-1]=e.quantile(n,t/a);return r}function r(t){if(!isNaN(t=+t))return i[e.bisect(o,t)]}var n=[],i=[],o=[];return r.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},r.domain=function(r){if(!arguments.length)return n.slice();n=[];for(var i,o=0,a=r.length;o<a;++o)i=r[o],null==i||isNaN(i=+i)||n.push(i);return n.sort(e.ascending),t()},r.range=function(e){return arguments.length?(i=at.call(e),t()):i.slice()},r.quantiles=function(){return o.slice()},r.copy=function(){return L().domain(n).range(i)},r}function N(){function t(t){if(t<=t)return s[e.bisect(a,t,0,o)]}function r(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*n)/(o+1);return t}var n=0,i=1,o=1,a=[.5],s=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],r()):[n,i]},t.range=function(t){return arguments.length?(o=(s=at.call(t)).length-1,r()):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=o?[a[o-1],i]:[a[e-1],a[e]]},t.copy=function(){return N().domain([n,i]).range(s)},T(t)}function I(){function t(t){if(t<=t)return n[e.bisect(r,t,0,i)]}var r=[.5],n=[0,1],i=1;return t.domain=function(e){return arguments.length?(r=at.call(e),i=Math.min(r.length,n.length-1),t):r.slice()},t.range=function(e){return arguments.length?(n=at.call(e),i=Math.min(r.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var e=n.indexOf(t);return[r[e-1],r[e]]},t.copy=function(){return I().domain(r).range(n)},t}function U(t){return new Date(t)}function H(t,r,i,o,a,s,u,c,l){function f(e){return(u(e)<e?m:s(e)<e?_:a(e)<e?w:o(e)<e?T:r(e)<e?i(e)<e?x:S:t(e)<e?M:k)(e)}function h(r,n,i,o){if(null==r&&(r=10),"number"==typeof r){var a=Math.abs(i-n)/r,s=e.bisector(function(t){return t[2]}).right(j,a);s===j.length?(o=e.tickStep(n/vt,i/vt,r),r=t):s?(s=j[a/j[s-1][2]<j[s][2]/a?s-1:s],o=s[1],r=s[0]):(o=e.tickStep(n,i,r),r=c)}return null==o?r:r.every(o)}var p=b(d,n.interpolateNumber),v=p.invert,y=p.domain,m=l(".%L"),_=l(":%S"),w=l("%I:%M"),T=l("%I %p"),x=l("%a %d"),S=l("%b %d"),M=l("%B"),k=l("%Y"),j=[[u,1,ct],[u,5,5*ct],[u,15,15*ct],[u,30,30*ct],[s,1,lt],[s,5,5*lt],[s,15,15*lt],[s,30,30*lt],[a,1,ft],[a,3,3*ft],[a,6,6*ft],[a,12,12*ft],[o,1,ht],[o,2,2*ht],[i,1,pt],[r,1,dt],[r,3,3*dt],[t,1,vt]];return p.invert=function(t){return new Date(v(t))},p.domain=function(t){return arguments.length?y(t):y().map(U)},p.ticks=function(t,e){var r,n=y(),i=n[0],o=n[n.length-1],a=o<i;return a&&(r=i,i=o,o=r),r=h(t,i,o,e),r=r?r.range(i,o+1):[],a?r.reverse():r},p.tickFormat=function(t){return null==t?f:l(t)},p.nice=function(t,e){var r=y();return(t=h(t,r[0],r[r.length-1],e))?y(E(r,t)):p},p.copy=function(){return g(p,H(t,r,i,o,a,s,u,c,l))},p}function z(){return H(o.timeYear,o.timeMonth,o.timeWeek,o.timeDay,o.timeHour,o.timeMinute,o.timeSecond,o.timeMillisecond,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function q(){return H(o.utcYear,o.utcMonth,o.utcWeek,o.utcDay,o.utcHour,o.utcMinute,o.utcSecond,o.utcMillisecond,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function V(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function B(){return u().range(yt)}function Y(){return u().range(mt)}function X(){return u().range(_t)}function G(){return u().range(gt)}function Q(){return x().interpolate(n.interpolateCubehelixLong).range([s.cubehelix(300,.5,0),s.cubehelix(-240,.5,1)])}function W(t){function e(e){var o=(e-r)/(n-r);return t(i?Math.max(0,Math.min(1,o)):o)}var r=0,n=1,i=!1;return e.domain=function(t){return arguments.length?(r=+t[0],n=+t[1],e):[r,n]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.copy=function(){return W(t).domain([r,n]).clamp(i)},T(e)}function $(){return W(n.interpolateCubehelixLong(s.cubehelix(-100,.75,.35),s.cubehelix(80,1.5,.8)))}function J(){return W(n.interpolateCubehelixLong(s.cubehelix(260,.75,.35),s.cubehelix(80,1.5,.8)))}function Z(){var t=s.cubehelix();return W(function(e){(e<0||e>1)&&(e-=Math.floor(e));var r=Math.abs(e-.5);return t.h=360*e-100,t.s=1.5-1.5*r,t.l=.8-.9*r,t+""})}function K(t){var e=W(function(e){return t[Math.round(e*t.length-e)]}).clamp(!0);return delete e.clamp,e}function tt(){return K(bt)}function et(){return K(wt)}function rt(){return K(Tt)}function nt(){return K(xt)}var it=Array.prototype,ot=it.map,at=it.slice,st={name:"implicit"},ut=[0,1],ct=1e3,lt=60*ct,ft=60*lt,ht=24*ft,pt=7*ht,dt=30*ht,vt=365*ht,yt=V("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),mt=V("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),_t=V("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),gt=V("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),bt=V("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"),wt=V("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"),Tt=V("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"),xt=V("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"),St="0.6.4";t.version=St,t.scaleBand=c,t.scalePoint=f,t.scaleIdentity=S,t.scaleLinear=x,t.scaleLog=F,t.scaleOrdinal=u,t.scaleImplicit=st,t.scalePow=R,t.scaleSqrt=D,t.scaleQuantile=L,t.scaleQuantize=N,t.scaleThreshold=I,t.scaleTime=z,t.scaleUtc=q,t.scaleCategory10=B,t.scaleCategory20b=Y,t.scaleCategory20c=X,t.scaleCategory20=G,t.scaleCubehelix=Q,t.scaleRainbow=Z,t.scaleWarm=$,t.scaleCool=J,t.scaleViridis=tt,t.scaleMagma=et,t.scaleInferno=rt,t.scalePlasma=nt})},function(t,e,r){!function(t,r){r(e)}(this,function(t){"use strict";function e(t,r,n,i){function s(e){return t(e=new Date(+e)),e}return s.floor=s,s.ceil=function(e){return t(e=new Date(e-1)),r(e,1),t(e),e},s.round=function(t){var e=s(t),r=s.ceil(t);return t-e<r-t?e:r},s.offset=function(t,e){return r(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(e,n,i){var o=[];if(e=s.ceil(e),i=null==i?1:Math.floor(i),!(e<n&&i>0))return o;do o.push(new Date(+e));while(r(e,i),t(e),e<n);return o},s.filter=function(n){return e(function(e){for(;t(e),!n(e);)e.setTime(e-1)},function(t,e){for(;--e>=0;)for(;r(t,1),!n(t););})},n&&(s.count=function(e,r){return o.setTime(+e),a.setTime(+r),t(o),t(a),Math.floor(n(o,a))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(i?function(e){return i(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}function r(t){return e(function(e){e.setHours(0,0,0,0),e.setDate(e.getDate()-(e.getDay()+7-t)%7)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/h})}function n(t){return e(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/h})}var i="0.2.6",o=new Date,a=new Date,s=e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,r){e.setTime(+e+r*t)},function(e,r){return(r-e)/t}):s:null};var u=1e3,c=6e4,l=36e5,f=864e5,h=6048e5,p=e(function(t){t.setTime(Math.floor(t/u)*u)},function(t,e){t.setTime(+t+e*u)},function(t,e){return(e-t)/u},function(t){return t.getUTCSeconds()}),d=e(function(t){t.setTime(Math.floor(t/c)*c)},function(t,e){t.setTime(+t+e*c)},function(t,e){return(e-t)/c},function(t){return t.getMinutes()}),v=e(function(t){var e=t.getTimezoneOffset()*c%l;e<0&&(e+=l),t.setTime(Math.floor((+t-e)/l)*l+e)},function(t,e){t.setTime(+t+e*l)},function(t,e){return(e-t)/l},function(t){return t.getHours()}),y=e(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/f},function(t){return t.getDate()-1}),m=r(0),_=r(1),g=r(2),b=r(3),w=r(4),T=r(5),x=r(6),S=e(function(t){t.setHours(0,0,0,0),t.setDate(1)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),E=e(function(t){t.setHours(0,0,0,0),t.setMonth(0,1)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}),M=e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*c)},function(t,e){return(e-t)/c},function(t){return t.getUTCMinutes()}),k=e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*l)},function(t,e){return(e-t)/l},function(t){return t.getUTCHours()}),j=e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/f},function(t){return t.getUTCDate()-1}),C=n(0),P=n(1),A=n(2),F=n(3),O=n(4),R=n(5),D=n(6),L=e(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(1)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),N=e(function(t){t.setUTCHours(0,0,0,0),t.setUTCMonth(0,1)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}),I=s.range,U=p.range,H=d.range,z=v.range,q=y.range,V=m.range,B=_.range,Y=g.range,X=b.range,G=w.range,Q=T.range,W=x.range,$=m.range,J=S.range,Z=E.range,K=I,tt=U,et=M.range,rt=k.range,nt=j.range,it=C.range,ot=P.range,at=A.range,st=F.range,ut=O.range,ct=R.range,lt=D.range,ft=C.range,ht=L.range,pt=N.range;t.timeMilliseconds=I,t.timeSeconds=U,t.timeMinutes=H,t.timeHours=z,t.timeDays=q,t.timeSundays=V,t.timeMondays=B,t.timeTuesdays=Y,t.timeWednesdays=X,t.timeThursdays=G,t.timeFridays=Q,t.timeSaturdays=W,t.timeWeeks=$,t.timeMonths=J,t.timeYears=Z,t.utcMilliseconds=K,t.utcSeconds=tt,t.utcMinutes=et,t.utcHours=rt,t.utcDays=nt,t.utcSundays=it,t.utcMondays=ot,t.utcTuesdays=at,t.utcWednesdays=st,t.utcThursdays=ut,t.utcFridays=ct,t.utcSaturdays=lt,t.utcWeeks=ft,t.utcMonths=ht,t.utcYears=pt,t.timeMillisecond=s,t.timeSecond=p,t.timeMinute=d,t.timeHour=v,t.timeDay=y,t.timeSunday=m,t.timeMonday=_,t.timeTuesday=g,t.timeWednesday=b,t.timeThursday=w,t.timeFriday=T,t.timeSaturday=x,t.timeWeek=m,t.timeMonth=S,t.timeYear=E,t.utcMillisecond=s,t.utcSecond=p,t.utcMinute=M,t.utcHour=k,t.utcDay=j,t.utcSunday=C,t.utcMonday=P,t.utcTuesday=A,t.utcWednesday=F,t.utcThursday=O,t.utcFriday=R,t.utcSaturday=D,t.utcWeek=C,t.utcMonth=L,t.utcYear=N,t.version=i,t.timeInterval=e,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){function r(t){var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=r;var n=Object.prototype.toString},function(t,e){t.exports=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>=0?e:(2147483647&e)+2147483648}},function(t,e,r){"use strict";function n(t,e,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(i,this,e)}function i(t,e,r){1==t?e.id=r.readVarint():2==t?o(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function o(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}function a(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}function s(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r=t[a],n+=(r.x-e.x)*(e.y+r.y);return n}var u=r(63);t.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,o=0,a=0,s=[];t.pos<r;){if(!i){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new u(o,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&s.push(e),s},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=1/0,s=-(1/0),u=1/0,c=-(1/0);t.pos<e;){if(!n){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>c&&(c=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,u,s,c]},n.prototype.toGeoJSON=function(t,e,r){function i(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+l)/u;t[e]=[360*(r.x+c)/u-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,r),c=this.extent*t,l=this.extent*e,f=this.loadGeometry(),h=n.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<f.length;o++)p[o]=f[o][0];f=p,i(f);break;case 2:for(o=0;o<f.length;o++)i(f[o]);break;case 3:for(f=a(f),o=0;o<f.length;o++)for(s=0;s<f[o].length;s++)i(f[o][s])}1===f.length?f=f[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:f},properties:this.properties};return"id"in this&&(d.id=this.id),d}},function(t,e,r){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(o(r))}function o(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}var a=r(22);t.exports=n,n.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){return Math.pow(2,Math.log2(t.value/e.value)/(t.zoom-e.zoom))-1}function i(t,e){var r=e.length,n=e[0],i=e[r-2],o=0;return t>n.zoom&&(o=t>=i.zoom?r-2:e.findIndex(function(r,n){return t>=e[n].zoom&&t<e[n+1].zoom})),[e[o],e[o+1]]}function o(t,e){return Math.min(t.max,Math.max(t.min,e))}function a(t,e){return function(r){var n=e.value,i=e.zoom,a=e.zoomIncrementFactor,s=r-i,u=n*Math.pow(2,Math.log2(1+a)*s);return o(t,u)}}function s(t,e){return function(o){var s=i(o,e);return a(t,{value:s[0].value,zoom:s[0].zoom,zoomIncrementFactor:n.apply(void 0,r(s))})(o)}}function u(t,e){return f(t,e),function(){return e}}function c(t,e){if(void 0===e.zoom)throw new Error(y+"zoom missing from input property Object");if(void 0===e.value)throw new Error(y+"value missing from input property Object");return f(t,e.value),h(t,e.zoom),a(t,{value:e.value,zoom:e.zoom,zoomIncrementFactor:void 0===e.zoomIncrementFactor?d:e.zoomIncrementFactor})}function l(t,e){if(1===e.length)return c(t,e[0]);if(e.length>=2){e.every(function(e){if(void 0===e.zoom||void 0===e.value)throw new Error(y+"unhandled array members, needs zoom and value per item");return h(t,e.zoom)&&f(t,e.value)});var r=e.slice(0).sort(function(t,e){return t.zoom-e.zoom});return s(t,r)}throw new Error(y+"unsupported bandwidth array")}function f(t,e){if(e<t.min)throw new Error(y+("invalid value "+e+" < "+t.min));if(e>t.max)throw new Error(y+("invalid value "+e+" > "+t.max));return!0}function h(t,e){if(e<t.minZoom)throw new Error(y+("invalid zoom "+e+" < "+t.minZoom));return!0}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=1,v=0,y="HeatmapLayer.options.bandwidth: ",m=function(t,e){this.min=t,this.max=e,this.minZoom=v};m.prototype.evaluateInput=function(t){switch("undefined"==typeof t?"undefined":p(t)){case"function":return t;case"number":return u(this,t);case"object":return Array.isArray(t)?l(this,t):c(this,t);default:throw new Error(y+"unhandled bandwidth type"+("undefined"==typeof t?"undefined":p(t)))}},t.exports=m},function(t,e){"use strict";function r(t){return t.split("\n").map(function(t,e){return String(10001+e).slice(1)+":"+t}).join("\n")}function n(t,e,n){var i=t.createShader(n);t.shaderSource(i,e),t.compileShader(i);var o=t.getShaderParameter(i,t.COMPILE_STATUS);if(o)return i;var a=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error("HeatmapLayer: "+(n===t.VERTEX_SHADER?"vertex":"fragment")+" shader was not compiled\n        \n"+a+"\n"+r(e))}t.exports=function(t,e,r){var i=n(t,e,t.VERTEX_SHADER),o=n(t,r,t.FRAGMENT_SHADER),a=t.createProgram();t.attachShader(a,i),t.attachShader(a,o),t.linkProgram(a);var s=t.getProgramParameter(a,t.LINK_STATUS);if(s)return a;var u=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error("HeatmapLayer: program was not linked\n"+u)}},function(t,e,r){"use strict";var n=r(10),i=n.SUM,o=n.AVERAGE,a=r(11),s=a.DB,u=a.LOG;t.exports=function(t){var e=t.dataTextureSize,r=t.dataSpriteDimension,n=t.tileSize,a=t.bandwidth,c=t.buffer,l=t.colorTextureSize,f=t.alphaTextureSize,h=t.aggregation,p=t.inputScale,d=t.valueRange,v=t.countRange,y=(1/l).toFixed(5),m=(1/f).toFixed(5),_=e/r,g=Math.pow(r,2),b=((n+2*c)/r).toFixed(5),w=a,T=w*w,x=1/(2*Math.PI*T),S=-1/(2*T);return"\n    precision lowp float;\n    uniform sampler2D u_data; //texture with data\n    uniform sampler2D u_color; //texture with color scale\n    uniform sampler2D u_alpha; //texture with alpha scale\n    varying vec2 v_tile_coord; //pixel coordinate in tile space\n\n    //array with length of data for each sprite\n    uniform int u_data_sprite_counts["+g+"];\n\n    float buffer = "+c.toFixed(1)+";\n\n    //kernel function: K(x) = ka * exp(x * kb);\n    float ka = "+x.toFixed(5)+";\n    float kb = "+S.toFixed(5)+";\n\n    //ranges represented as 2 dimensional vector {x: min, y: max}\n    vec2 value_range = vec2("+d[0].toExponential()+", "+d[1].toExponential()+");\n\n    vec2 count_range = vec2("+v[0].toExponential()+", "+v[1].toExponential()+");\n\n    //checks if ranges a and b are intersecting\n    bool in_range (in vec2 a, vec2 b) {\n        vec2 left;\n        vec2 right;\n        if (a.y > b.y) {\n            left = b;\n            right = a;\n        } else {\n            left = a;\n            right = b;\n        }\n        return (left.y > right.x);\n    }\n\n    //conversion from/to decibels (dB)\n    "+(p===s?"\n    float db_k = log(10.0) / 10.0;\n    float db_to_linear(in float db) {\n        return exp(db_k * db);\n    }\n    float linear_to_db(in float linear) {\n        return log(linear) / db_k;\n    }\n    ":"")+"\n\n    //conversion from/to log scale\n    "+(p===u?"\n    float log_to_linear(in float v) {\n        return exp(v);\n    }\n    float linear_to_log(in float v) {\n        return log(v);\n    }\n    ":"")+"\n\n    //returns length of data in sprite\n    int get_sprite_count(in int sprite) {\n        int sprite_count = 0;\n        //in shader you cannot use variable to access array element\n        "+function(){for(var t="",e=0;e<g;e++)t+="if (sprite == "+e+") {\n                    sprite_count = u_data_sprite_counts["+e+"];\n                }";return t}()+"\n        return sprite_count;\n    }\n\n    //size of texture with data sprites\n    float data_texture_size = "+e.toFixed(1)+";\n\n    void main() {\n        vec4 point; //data point {x: x, y: y, z: count, w: value}\n        float d; //distance from data point to current pixel\n        float count = 0.0; //total count for current pixel\n        float value = 0.0; //total value for current pixel\n        float point_value; //data point value\n        float summary_point_value; //summary data point value\n        float point_count; //data point count\n        float k; //kernel function value in current pixel\n\n        //bbox for current pixel\n        vec2 range_x = vec2(\n            v_tile_coord.x - buffer,\n            v_tile_coord.x + buffer\n        );\n        vec2 range_y = vec2(\n            v_tile_coord.y - buffer,\n            v_tile_coord.y + buffer\n        );\n\n        //walk through every data sprite (x axis)\n        for (int shift_x = 0; shift_x < "+r+"; shift_x++) {\n            //if sprite is not in pixel bbox continue\n            if (!in_range(\n                range_x,\n                vec2(\n                    float(shift_x) * "+b+" - buffer,\n                    float(shift_x + 1) * "+b+"  - buffer\n                )\n            )) {\n                continue;\n            }\n\n            //walk through every data sprite (y axis)\n            for (int shift_y = 0; shift_y < "+r+"; shift_y++) {\n                //if sprite is not in pixel bbox continue\n                if (!in_range(\n                    range_y,\n                    vec2(\n                        float(shift_y) * "+b+" - buffer,\n                        float(shift_y + 1) * "+b+" - buffer\n                    )\n                )) {\n                    continue;\n                }\n\n                int i = 0; // index of data point in sprite\n\n                //sprite number\n                int shift = shift_x + "+r+" * shift_y;\n\n                //length of data in current sprite\n                int data_count = get_sprite_count(shift);\n\n                //walk through every point in sprite\n                for (int row = 0; row < "+_+"; row++) {\n                    for (int col = 0; col < "+_+"; col++) {\n                        //if we reached data length, break\n                        if (i >= data_count) {\n                            break;\n                        }\n                        i++;\n\n                        //calculate coordinates of current data point\n                        //within data texture\n                        float tx = float(col + shift_x * "+_+")\n                            / data_texture_size;\n                        float ty = float(row + shift_y * "+_+")\n                            / data_texture_size;\n\n                        //read data point\n                        point = texture2D(u_data, vec2(tx, ty));\n\n                        //calculate distance\n                        //between current pixel and data points\n                        d = distance(point.xy, v_tile_coord.xy);\n\n                        if (d < buffer) {\n\n                            //calculate kernel value\n                            k = ka * exp(d * d * kb);\n\n                            //use kernel to estimate how count of data point\n                            //is distributed in current pixel\n                            point_count = k * point.z;\n\n                            point_value = point.w;\n\n                            //transform value to linear if needed\n                            "+(p===s?"point_value = db_to_linear(point.w);":p===u?"point_value = log_to_linear(point.w);":"point_value = point.w;")+"\n\n                            //calculate summary value\n                            "+(h===i?"summary_point_value = k * point_value;":"summary_point_value = point_value *\n                                    point_count;")+"\n\n                            value += summary_point_value;\n                            count += point_count;\n                        }\n                    }\n\n                    //if passed through all data points, break\n                    if (i >= data_count) {\n                        break;\n                    }\n                }\n            }\n        }\n\n        //count more then minimal\n        if (count > count_range.x) {\n\n            //if need average we should divide on count\n            float value_k = "+(h===o?"1.0 / count":"1.0")+";\n            value *= value_k;\n\n            //normalize value to 0..1 range\n            float norm_value = (("+(p===s?"linear_to_db(value)":p===u?"linear_to_log(value)":"value")+") - value_range.x) /\n                (value_range.y - value_range.x);\n            if (norm_value > 1.0) {\n                norm_value = 1.0;\n            }\n            if (norm_value < "+y+") {\n                norm_value = "+y+"; //shoul be > 0\n            }\n\n            //normalize count (density) to 0..1 range\n            "+(v[0]===v[1]?"float density = 1.0;":"\n                float density = (count - count_range.x) /\n                    (count_range.y - count_range.x);\n                ")+"\n            if (density > 1.0) {\n                density = 1.0;\n            }\n            if (density < "+m+") {\n                density = "+m+";// shoul be > 0\n            }\n\n            //read color from texture\n            vec4 color = texture2D(u_color, vec2(norm_value, 0.5));\n\n            //read alpha from texture\n            vec4 alpha = texture2D(u_alpha, vec2(density, 0.5));\n\n            //set pixel color\n            gl_FragColor = vec4(vec3(color), alpha.w * color.w);\n        } else {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n    }\n    ";
}},function(t,e,r){"use strict";function n(t){var e=t.gl,r=t.options,n=r.alphaTextureSize,i=r.alphaScale,o=document.createElement("canvas");o.width=n,o.height=1;for(var a=o.getContext("2d"),s=1;s<=n;s++)a.fillStyle="rgba(0, 0, 0, "+i(s/n)+")",a.fillRect(s,0,1,1);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o)}function i(t){var e=t.gl,r=t.options,n=r.colorTextureSize,i=document.createElement("canvas");i.width=n,i.height=1;for(var o=i.getContext("2d"),a=1;a<=n;a++)o.fillStyle=r.colorScale(a/n),o.fillRect(a,0,1,1);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)}function o(t){var e=t.gl,r=t.program,n=e.getAttribLocation(r,"a_position"),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);var o=[-1,1,-1,-1,1,-1,-1,1,1,1,1,-1];e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0)}function a(t,e,r){var n=t.gl,i=t.program;n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,n.createTexture()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.uniform1i(n.getUniformLocation(i,r),e)}function s(t,e,r){var n=t.program,i=t.gl;i.uniform1iv(i.getUniformLocation(n,e),r)}var u=r(30),c=r(27),l=r(26),f={dataTextureSize:512,colorTextureSize:256,alphaTextureSize:256,downsampling:1},h=function t(e){var r=Object.assign({},f,e),s=r.tileSize,u=r.dataTextureSize,c=r.downsampling,l=s/c;this.options=r;var h=document.createElement("canvas");h.width=l,h.height=l,this.canvas=h;var p=h.getContext("webgl",{premultipliedAlpha:!1});p.getExtension("OES_texture_float"),this.gl=p;var d=p.getParameter(p.MAX_FRAGMENT_UNIFORM_VECTORS);r.dataSpriteDimension=d>=1024?16:8;var v=t.createProgram_(p,t.vertex_(r),t.fragment_(r));p.useProgram(v),this.program=v,o(this),this.dataTypedArray=new Float32Array(u*u*4),a(this,0,"u_data"),a(this,1,"u_color"),i(this),a(this,2,"u_alpha"),n(this)};h.prototype.dispose=function(){this.gl.getExtension("WEBGL_lose_context").loseContext()},h.prototype.draw=function(t){for(var e=this.gl,r=this.dataTypedArray,n=this.options,i=n.dataTextureSize,o=n.tileSize,a=n.dataSpriteDimension,u=n.buffer,c=i/a,l=[],f=0;f<a*a;f++)l.push(0);for(var h=0;h<t.length;h++){var p=t[h];if(p.x>=-u&&p.x<o+u&&p.y>=-u&&p.y<o+u){var d=Math.floor((p.x+u)/((o+2*u)/a)),v=Math.floor((p.y+u)/((o+2*u)/a)),y=d+a*v;if(l[y]>=c*c)throw new Error("Heatmap: Sprite Overflow");var m=l[y],_=d*c+m%c,g=v*c+Math.floor(m/c),b=4*(g*i+_);r[b]=p.x,r[b+1]=p.y,r[b+2]=p.count,r[b+3]=p.value,l[y]++}}e.activeTexture(e.TEXTURE0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i,i,0,e.RGBA,e.FLOAT,r),s(this,"u_data_sprite_counts",l),e.drawArrays(e.TRIANGLES,0,6)},h.createProgram_=l,h.vertex_=u,h.fragment_=c,t.exports=h},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e,r,n){var i=f(t,n);i.draw(e),r.getContext("2d").drawImage(i.canvas,0,0)}function o(t,e){var r=void 0;if("function"==typeof e.domain&&Array.isArray(r=e.domain())&&(Math.min.apply(Math,n(r))<0||Math.max.apply(Math,n(r))>1))throw new Error("HeatmapLayer: "+t+" domain should be from 0 to 1")}function a(t,e,r,i){var o=void 0;if("function"==typeof e.range&&Array.isArray(o=e.range())&&(Math.min.apply(Math,n(o))<r||Math.max.apply(Math,n(o))>i))throw new Error("HeatmapLayer: "+t+" range should be from "+r+" to "+i)}function s(t,e){if(!Array.isArray(e)||2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw new Error("HeatmapLayer: "+t+" is not H.datalens.HeatmapLayer.Range")}function u(t,e,r){if(!r[e])throw new Error("HeatmapLayer: "+t+" should be on of "+Object.keys(r).join(", "))}function c(t){var e=t.bandwidth,r=t.valueRange,n=t.countRange,i=t.colorScale,c=t.alphaScale,l=t.aggregation,f=t.inputScale;if(e<x)throw new Error("HeatmapLayer: bandwidth should not be 0 or less");if(e>T)throw new Error("HeatmapLayer: bandwidth should be bigger "+T);if(s("valueRange",r),s("countRange",n),"function"!=typeof i)throw new Error("HeatmapLayer: colorScale should be a function");if(o("colorScale",i),"function"!=typeof c)throw new Error("HeatmapLayer: alphaScale should be a function");o("alphaScale",c),a("alphaScale",c,0,1),u("aggregation",l,v),u("inputScale",f,y)}function l(t){return"function"==typeof t?function(){return w*t.apply(void 0,arguments)}:w*t}function f(t,e){var r=[t.tileProvider_.uid,e].join("_"),n=E.get(r);if(!n){var i=void 0;t.optionsPerZoom_[e]?i=t.optionsPerZoom_[e]:(i=h(t,e),c(i),t.optionsPerZoom_[e]=i),n=new j.Heatmap_(i),E.add(r,n,1)}return n}function h(t,e){var r={},n=t.heatmapLayerOptions_;return["bandwidth","valueRange","countRange","downsampling"].forEach(function(t){"function"==typeof n[t]?r[t]=n[t](e):r[t]=n[t]}),Object.assign({},n,r,{tileSize:t.tileSize,buffer:l(r.bandwidth)})}var p=r(1)(),d=r(25),v=r(10),y=r(11),m=r(12),_=r(18),g=_.scaleLinear,b=128,w=3,T=Math.floor(b/w),x=Number.MIN_VALUE,S={bandwidth:1,valueRange:[0,1],countRange:[0,0],colorScale:g().range(["silver","black"]),alphaScale:g().range([0,1]),downsampling:1,aggregation:v.SUM,inputScale:y.LINEAR},E=new p.util.Cache(1);E.registerOnDrop(function(t,e){e.dispose()});var M=0,k=r(28),j=function(t,e){var r=Object.assign({},S,e);this.heatmapLayerOptions_=r;var n=new d(x,T);this.heatmapLayerOptions_.bandwidth=n.evaluateInput(r.bandwidth),this.optionsPerZoom_={},M++,E.setMaxSize(M);var o="buffer"in e?e.buffer:l(r.bandwidth);m.prototype.constructor.call(this,t,Object.assign({},r,{buffer:o,rowToTilePoint:r.rowToTilePoint,renderTile:i.bind(null,this)})),this.tileProvider_.pointType=this.tileProvider_.constructor.PointType.HASVALUE};j.prototype=Object.create(m.prototype),j.prototype.constructor=j,j.prototype.redraw=function(){E.removeAll(),this.optionsPerZoom_={},m.prototype.redraw.call(this)},j.prototype.dispose=function(){M--,E.setMaxSize(M||1),m.prototype.dispose.call(this)},j.defaultDataToRows=m.defaultDataToRows,j.InputScale=y,j.Aggregation=v,j.cache_=E,j.Heatmap_=k,t.exports=j},function(t,e){"use strict";t.exports=function(t){var e=t.tileSize;return"\n    precision lowp float; //don't see difference between precisions\n    attribute vec4 a_position; //input buffer with vertices (clip space)\n    varying vec2 v_tile_coord; //position in tile space\n    void main() {\n        //transform coordinates from clip space to tile space\n        v_tile_coord = (a_position.xy + 1.0) * 0.5 *\n            vec2("+e+", "+e+") * vec2(1, -1) +\n            vec2(0, "+e+");\n        gl_Position = a_position;\n    }\n    "}},function(t,e,r){"use strict";function n(t,e){var r=Object.assign({},e||{});"number"==typeof r.size&&(r.size={w:r.size,h:r.size}),!r.size||"anchor"in r||(r.anchor={x:r.size.w/2,y:r.size.h/2});var n=void 0;if("string"==typeof t)n=t;else{if(!Array.isArray(t))throw new TypeError("ObjectLayer.createIcon:\n          the svg parameter must be a String or an Array");if("svg"!==t[0])throw new TypeError('ObjectLayer.createIcon: the root element must be "svg"');n=a.serialize(t)}var i=s(n+JSON.stringify(r)),u=c.get(i);if(u)return u;var l=new o.map.Icon(n,r);return c.add(i,l,1),l}function i(){return c}var o=r(1)(),a=r(32),s=r(21),u=2048,c=new o.util.Cache(u);t.exports={createIcon:n,getIconCache:i}},function(t,e,r){"use strict";function n(t){return"-"+t.toLowerCase()}function i(t){return"string"==typeof t||Array.isArray(t)}function o(t){var e={};if(t[1]&&!i(t[1])&&(e=t[1]),"svg"===t[0]){if(e=Object.assign({},e,{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),!(e.width&&e.height||e.viewBox))throw new Error("ObjectLayer.createIcon:\n                SVG element should have width and height or viewBox properties");if(e.viewBox){var r=String(e.viewBox).split(/[\s\,]+/).map(Number);if(4!==r.length)throw new Error("ObjectLayer.createIcon:\n                    SVG element viewBox is not correct "+e.viewBox);"width"in e||(e.width=r[2]),"height"in e||(e.height=r[3])}}return e}var a=r(56),s=r(57),u=r(55),c=/[A-Z]/g;t.exports={serialize:function t(e){var r=String(e[0]);if(s.indexOf(r)<0)throw new Error("ObjectLayer.createIcon: unknown tag '"+r+"'");var l=void 0,f="",h="";if(i(e[1])?l=1:e.length>2&&(l=2),l)for(var p=l;p<e.length;p++)if("string"==typeof e[p])f+=e[p];else{if(!Array.isArray(e[p]))throw new Error("ObjectLayer.createIcon: node content\n                    has not a proper type");f+=t(e[p])}var d=o(e);for(var v in d){var y=d[v],m=v;if(a.indexOf(v)>=0&&(m=v.replace(c,n)),u.indexOf(m)<0)throw new Error("ObjectLayer.createIcon:\n                     unknown property "+m+";\n                     notice that properties are case sensitive;");h+=" "+m+'="'+y+'"'}return f?"<"+r+h+">"+f+"</"+r+">":"<"+r+h+"/>"}}},function(t,e,r){"use strict";var n=r(1)(),i=function(t,e){this.onDataRequest_=e,n.map.provider.LocalObjectProvider.call(this,t)};i.prototype=Object.create(n.map.provider.LocalObjectProvider.prototype),i.prototype.constructor=i,i.prototype.providesMarkers=function(){return!0},i.prototype.requestMarkers=function(t,e,r,n){return this.onDataRequest_(t,e,r,n)},t.exports=i},function(t,e,r){"use strict";var n=r(4),i=function(t,e){this.processedData_=null,this.processedDataByZoom_={},n.prototype.constructor.call(this,t,e)};i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.onDataRequest_=function(t,e,r,i){var o=this,a=Math.floor(e),s=this.dataProvider_.getData();if(s&&this.processedDataByZoom_[a]!==s){var u=this.getDataForProvider_(a,s);if(u)if(this.options_.clustering){var c=this.getClusterProvider_(a);c.setDataPoints(u)}else this.objectProvider_.getRootGroup().addObject(u),setTimeout(function(){o.objectProvider_.dispatchEvent("update")});this.processedDataByZoom_[a]=s}return n.prototype.onDataRequest_.call(this,t,e,r,i)},i.prototype.onProviderUpdate_=function(){this.redraw(),n.prototype.onProviderUpdate_.call(this)},i.prototype.redraw=function(){this.processedDataByZoom_={},n.prototype.redraw.call(this)},i.prototype.dispose=function(){this.processedDataByZoom_={},n.prototype.dispose.call(this)},t.exports=i},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var i=r(1)(),o=r(4),a=r(59),s=function(t,e){var r=this;this.queryTileProvider_=t,t.getCache().registerOnDrop(function(){return r.onTileDrop_.apply(r,arguments)}),this.tileLayer_=new i.map.layer.TileLayer(t),this.updateClusterDataPoints_=a(this.updateClusterDataPoints_,100),this.processedTiles_={},o.prototype.constructor.call(this,this.queryTileProvider_,e)};s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.updateClusterDataPoints_=function(t){var e=[],r=this.getClusterProvider_(t);for(var i in this.processedTiles_)Number(i.split("_")[3])===t&&this.processedTiles_[i]&&e.push.apply(e,n(this.processedTiles_[i]));r.setDataPoints(e)},s.prototype.onTileDrop_=function(t){if(this.processedTiles_.hasOwnProperty(t)){var e=this.processedTiles_[t];if(delete this.processedTiles_[t],this.options_.clustering){var r=Number(t.split("_")[3]);this.updateClusterDataPoints_(r)}else e&&this.objectProvider_.getRootGroup().removeObject(e)}},s.prototype.onDataRequest_=function(t,e,r,n){for(var i=Math.floor(e),a=this.tileLayer_.requestTiles(t,i,n),s=a.tiles,u=[],c=0;c<s.length;c++){var l=s[c];if(!this.processedTiles_.hasOwnProperty(l.key)){var f=this.getDataForProvider_(i,l.data);this.processedTiles_[l.key]=f,f&&u.push(f)}}return u.length&&(this.options_.clustering?this.updateClusterDataPoints_(i):this.objectProvider_.getRootGroup().addObjects(u)),o.prototype.onDataRequest_.call(this,t,e,r,n)},s.prototype.redraw=function(){this.processedTiles_={},o.prototype.redraw.call(this)};var u=function(){};s.prototype.dispose=function(){this.onTileDrop_=u,this.processedTiles_={},o.prototype.dispose.call(this)},t.exports=s},function(t,e,r){"use strict";var n=r(1)(),i=r(35),o=r(34),a=r(4),s=r(2),u=r(31),c=function t(e,r){if(this.options_={},Object.assign(this.options_,r||{}),"function"!=typeof this.options_.rowToMapObject)throw new TypeError("ObjectLayer: options.rowToMapObject must be callback");if(this.options_.clustering){if(!n.clustering)throw new Error("ObjectLayer: mapsjs-clustering.js was not loaded");if("function"!=typeof this.options_.clustering.rowToDataPoint)throw new TypeError("ObjectLayer: options.clustering.rowToDataPoint\n                must be a callback")}if(this.layer_=null,e instanceof n.map.provider.RemoteTileProvider)this.layer_=new t.TileQueryLayer_(e,this.options_);else{if(!(e instanceof s))throw new Error("ObjectLayer: provider must be of a type\n            H.map.provider.RemoteTileProvider or H.datalens.Provider");this.layer_=new t.QueryLayer_(e,this.options_)}n.map.layer.ObjectLayer.prototype.constructor.call(this,this.layer_.getProvider(),this.options_)};c.prototype=Object.create(n.map.layer.ObjectLayer.prototype),c.prototype.constructor=c,Object.assign(c,u),c.prototype.redraw=function(){this.layer_.redraw()},c.prototype.updateObjectStyle=function(t,e){if(!(t instanceof n.map.Object))throw new TypeError("ObjectLayer.updateObjectStyle: object is not H.map.Object");if(!this.options_.clustering&&t.getProvider()!==this.layer_.getProvider())throw new TypeError("ObjectLayer.updateObjectStyle: object is not on Layer");var r=void 0;if(this.options_.clustering){var i=t.getProvider();r=i&&i.min}else{var o=t.getParentGroup().getData();r=o&&o.zoom}if(!r)throw new TypeError("ObjectLayer.updateObjectStyle: object is not on tile groups;\n            probably it was added directly to Provider Root Group");this.layer_.applyStyleToObject(r,t,e)},c.prototype.dispose=function(){this.layer_.dispose(),n.map.layer.ObjectLayer.prototype.dispose.call(this)},c.defaultDataToRows=a.defaultDataToRows,c.TileQueryLayer_=i,c.QueryLayer_=o,t.exports=c},function(t,e,r){"use strict";var n=r(3),i=r(2),o={queryId:null,queryParams:{}},a=function(t,e){if(!(t instanceof n))throw new TypeError("QueryProvider: service must be an instance of H.datalens.Service");if(this.options_={},Object.assign(this.options_,o,e||{}),"string"!=typeof this.options_.queryId)throw new TypeError("QueryProvider: the query ID must be a string");this.service_=t,this.requestPromise_=null,i.prototype.constructor.call(this,null,this.options_)};a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.setQueryId=function(t){this.options_.queryId=t},a.prototype.getData=function(){return null===this.data_&&null===this.requestPromise_&&this.reload(),i.prototype.getData.call(this)},a.prototype.setQueryParams=function(t){this.options_.queryParams=t},a.prototype.reload=function(){var t=this,e=this.options_,r=e.queryId,n=e.queryParams;this.requestPromise_&&this.requestPromise_.cancel(),this.requestPromise_=this.service_.fetchQueryData(r,n),this.requestPromise_.then(function(e){t.setData(e)}).finally(function(){t.requestPromise_=null}),this.requestPromise_.done()},t.exports=a},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e,r){if(!t||"string"!=typeof t.x||"string"!=typeof t.y||"string"!=typeof t.z)throw e?new o.lang.InvalidArgumentError(c,r,"QueryTileProvider: tileParamNames must be strings"):new TypeError("QueryTileProvider: tileParamNames must be strings")}var o=r(1)(),a=r(3),s=r(5),u={tileCacheSize:2048*devicePixelRatio*2,queryId:null,queryParams:null,tileParamNames:null},c=function t(e,r){if(!(e instanceof a))throw new o.lang.InvalidArgumentError(t,0,"QueryTileProvider: service must be an instance of\n            H.datalens.Service");this.options_={},Object.assign(this.options_,u,r),this.service_=e,this.cache_=new o.util.Cache(this.options_.tileCacheSize),o.map.provider.RemoteTileProvider.call(this,r)};c.prototype=Object.create(o.map.provider.RemoteTileProvider.prototype),c.prototype.constructor=c,c.prototype.getCache=function(){return this.cache_},c.prototype.requestInternal=function(t,e,r,o,a){var u=this,c=this.options_,l=c.tileParamNames;i(l);var f=s.delay(10).then(function(){var i;return u.service_.fetchQueryData(c.queryId,Object.assign({},c.queryParams||{},(i={},n(i,l.x,t),n(i,l.y,e),n(i,l.z,r),i)))});return f.then(o,a).done(),{cancel:f.cancel.bind(f)}},c.prototype.setQueryId=function(t){this.options_.queryId=t,o.map.provider.RemoteTileProvider.prototype.reload.call(this)},c.prototype.setQueryParams=function(t){this.options_.queryParams=t,o.map.provider.RemoteTileProvider.prototype.reload.call(this)},c.prototype.setTileParamNames=function(t){i(t,c.prototype.setTileParamNames,0),this.options_.tileParamNames=t,o.map.provider.RemoteTileProvider.prototype.reload.call(this)},c.prototype.reload=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o.map.provider.RemoteTileProvider.prototype.reload.call(this,t)},t.exports=c},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t){return Math.pow(2,t)}function o(t,e,r,n){for(var o=t.tileSize,a=i(n),s=u(t,n),c=Math.floor(e-s/o),l=Math.ceil(e+s/o),f=Math.floor(r-s/o),h=Math.ceil(r+s/o),p=[],d=c;d<=l;d++)for(var v=f;v<=h;v++)v<0||v>=a||e===d&&r===v||p.push({x:(a+d)%a,y:v,z:n,dx:e-d,dy:r-v});return p.push({x:e,y:r,z:n,dx:0,dy:0}),p}function a(){}function s(t,e){for(var r=[],n=0;n<e.length;n++){var i=e[n],o=i.x,a=i.y,s=i.z,u=c(t,o,a,s);u&&r.push(u)}return r}function u(t,e){return"function"==typeof t.options_.buffer?t.options_.buffer(e):t.options_.buffer}function c(t,e,r,n){var i=t.queryProvider_.getTileKey(e,r,n),o=t.tilePoints_[i];if(o)return o;var a=t.queryProvider_.requestTile(e,r,n);if(a){var s=t.options_.dataToRows(a.data,e,r,n);if(!Array.isArray(s))throw new Error("\n                RasterLayer: dataToRows should return array of objects\n            ");for(var u=Array(s.length),c=0;c<s.length;c++){var l=s[c],f=t.options_.rowToTilePoint(l,e,r);if(!f||"number"!=typeof f.x||"number"!=typeof f.y||!(t.pointType===m.PointType.NOVALUE||"number"==typeof f.count&&f.count>0&&"number"==typeof f.value))throw new Error("RasterLayer: rowToTilePoint should return "+(t.pointType===m.PointType.HASVALUE?"H.datalens.HeatmapLayer.TilePoint":"H.datalens.RasterLayer.TilePoint"));f.data=l,u[c]=f}return t.tilePoints_[i]=u,u}}function l(t,e,r,n,i){return v.map.provider.RemoteTileProvider.prototype.createTileInternal.call(t,e,r,n,i)}function f(t,e,r,n,i,o){for(var a=[],s=0;s<e.length;s++){var u=e[s],c=void 0;c=t===m.PointType.HASVALUE?{x:u.x-r,y:u.y-n,data:u.data,count:u.count,value:u.value}:{x:u.x-r,y:u.y-n,data:u.data},c.x>=-i&&c.x<o+i&&c.y>=-i&&c.y<o+i&&a.push(c)}return a}function h(t,e,r){var n=t.getContext("2d");n.clearRect(0,0,r,e),n.clearRect(0,r-e,r,e),n.clearRect(0,0,e,r),n.clearRect(r-e,0,e,r)}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=r(1)(),y=r(9),m=function t(e,r){var n=this;this.tilePoints_={},this.pointType=t.PointType.NOVALUE,this.options_=r,this.queryProvider_=e,this.onProviderUpdate_=this.onProviderUpdate_.bind(this),this.queryProvider_.addEventListener("update",this.onProviderUpdate_),this.queryProvider_.getCache().registerOnDrop(function(t){n.onDataTileDrop_(t)}),this.completeTiles_={},this.tileCanvasPool_=new y(e.tileSize),this.cache_=new v.util.Cache(e.getCache().getMaxSize()),this.cache_.registerOnDrop(function(t){n.onTileDrop_(t)}),v.map.provider.RemoteTileProvider.call(this,this.options_)};m.prototype=Object.create(v.map.provider.RemoteTileProvider.prototype),m.prototype.constructor=m,m.prototype.onProviderUpdate_=function(){this.dispatchEvent("update")},m.prototype.onDataTileDrop_=function(t){var e=t.split("_").slice(1).map(Number),r=d(e,3),n=r[0],i=r[1],a=r[2];delete this.tilePoints_[t];for(var s=o(this,n,i,a),u=0;u<s.length;u++){var c=s[u],l=this.getTileKey(c.x,c.y,c.z);delete this.completeTiles_[l]}},m.prototype.onTileDrop_=function(t){var e=this.cache_.get(t);e&&e.data&&this.tileCanvasPool_.push(e.data)},m.prototype.requestInternal=function(t,e,r,n){var i=this.getTileKey(t,e,r);if(this.completeTiles_[i])return n(),{cancel:a};var o=function(){var t=setTimeout(n,500);return{v:{cancel:function(){clearTimeout(t)}}}}();return"object"===("undefined"==typeof o?"undefined":p(o))?o.v:void 0},m.prototype.requestTile=function(t,e,r,n){var i=this.getTileKey(t,e,r),a=this.cache_,u=a.get(i);if(u&&!this.completeTiles_[i]){var c=o(this,t,e,r),l=s(this,c),f=c.length===l.length;f&&(this.completeTiles_[i]=1,a.drop(i))}return v.map.provider.RemoteTileProvider.prototype.requestTile.call(this,t,e,r,n)},m.prototype.createTileInternal=function(t,e,r){var i=this.tileSize,a=u(this,r),p=c(this,t,e,r),d=[],v=void 0,y=void 0;if(p){var m=void 0,_=void 0;if(a?(m=o(this,t,e,r),_=s(this,m),v=m.length===_.length):v=!0,v&&a)for(var g=0;g<_.length;g++){var b,w=_[g],T=m[g],x=i*T.dx,S=i*T.dy;(b=d).push.apply(b,n(f(this.pointType,w,x,S,a,i)))}else a<.1*i&&(d=p)}if(d.length){var E=this.tileCanvasPool_.pop();this.options_.renderTile(d,E,r),!v&&a&&h(E,a,i),y=l(this,t,e,r,E)}else y=l(this,t,e,r,null);return y},m.prototype.getCache=function(){return this.cache_},m.prototype.reload=function(){this.completeTiles_={},this.tilePoints_={},v.map.provider.RemoteTileProvider.prototype.reload.call(this)},m.prototype.dispose=function(){this.queryProvider_.removeEventListener("update",this.onProviderUpdate_),this.onDataTileDrop_=a,this.cache_.removeAll(),this.onTileDrop_=a,this.completeTiles_={},this.tilePoints_={},v.map.provider.RemoteTileProvider.prototype.dispose.call(this)},m.PointType={HASVALUE:"HASVALUE",NOVALUE:"NOVALUE"},t.exports=m},function(t,e,r){"use strict";var n=r(7),i=function(t,e){this.name="HttpError",this.message=t+", "+n[t]+"; "+e.msg,this.stack=(new Error).stack,Object.assign(this,e)};i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,t.exports=i},function(t,e,r){"use strict";var n=r(5),i=r(73),o=r(7);t.exports={request:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=void 0,s=void 0;return"GET"===t.method&&(a=JSON.stringify(t),s=e[a])?s:(s=new n(function(n,i,s){var u=r(t,function(t,r){t?(e[a]=null,i(t)):(r.statusCode!==o.OK&&(e[a]=null),n(r))});s(function(){e[a]=null,u.abort()})}),a&&(e[a]=s),s)}}},function(t,e,r){"use strict";function n(t){if("string"!=typeof t&&"number"!=typeof t)throw new Error("SpatialLayer: rowToSpatialId must return string or number\n            but got "+t)}function i(t,e){var r=t.spatialMap_[e.id];r||(r=[],t.spatialMap_[e.id]=r),r.push(e)}function o(){}var a=r(1)(),s=r(9),u=r(43),c=r(13),l={tileCacheSize:1024,tileSize:256},f=function(t,e,r){var n=this;this.options_={},Object.assign(this.options_,l,r),this.rowMap_={},this.spatialMap_={},this.tileCanvasPool_=new s(this.options_.tileSize),this.hitTestCanvas_=this.tileCanvasPool_.pop(),this.cache_=new a.util.Cache(this.options_.tileCacheSize),this.cache_.registerOnDrop(function(t){n.onTileDrop_(t)}),this.dataProvider_=t,this.onDataProviderUpdate_=this.onDataProviderUpdate_.bind(this),this.dataProvider_.addEventListener("update",this.onDataProviderUpdate_),this.onDataProviderUpdate_(),this.spatialProvider_=e,this.onSpatialProviderUpdate_=this.onSpatialProviderUpdate_.bind(this),this.spatialProvider_.addEventListener("update",this.onSpatialProviderUpdate_),a.map.provider.RemoteTileProvider.call(this,r)};f.prototype=Object.create(a.map.provider.RemoteTileProvider.prototype),f.prototype.constructor=f,f.prototype.onSpatialProviderUpdate_=function(){this.dispatchUpdate()},f.prototype.onDataProviderUpdate_=function(){this.rowMap_={};var t=this.dataProvider_.getData();if(t)for(var e=this.options_.dataToRows(t),r=0;r<e.length;r++){var i=e[r],o=this.options_.rowToSpatialId(i);if(n(o),o in this.rowMap_)throw new Error("SpatialLayer: duplicating spatialId:"+o+"; use dataToRows to aggregate data;");this.rowMap_[o]=i}this.cache_.removeAll(),this.dispatchUpdate()},f.prototype.updateSpatialStyle=function(t,e){for(var r=this.spatialMap_[t.id],n=0;n<r.length;n++)r[n].state=e,this.invalidateObject(r[n]);this.dispatchUpdate()},f.prototype.invalidateObject=function(t){var e=this.getCache().get(t.tileKey);e&&(e.valid=!1)},f.prototype.onTileDrop_=function(t){var e=this.cache_.get(t);e&&e.data&&this.tileCanvasPool_.push(e.data)},f.prototype.getCache=function(){return this.cache_},f.prototype.requestTile=function(t,e,r,n){var i=this.getTileKey(t,e,r),o=this.cache_.get(i);if(o)return o.valid||o.render(),o;if(!n){var a=this.spatialProvider_.requestTile(t,e,r,n);if(a){var s=this.createTileInternal(t,e,r,a.data);return s&&this.cache_.add(i,s,1),s}}return null},f.prototype.cancelTile=function(t,e,r){this.spatialProvider_.cancelTile(r,e,r)},f.prototype.createTileInternal=function(t,e,r,o){var a=o.layer,s=o.features;if(a){for(var l=this.tileCanvasPool_.pop(),f=void 0,h=[],p=this.getTileKey(t,e,r),d=0;d<s.length;d++){var v=s[d],y=String(this.options_.featureToSpatialId(v));n(y);var m=new c({provider:this,id:y,feature:v,tileKey:p});h.push(m),i(this,m);var _=this.rowMap_[y];_&&m.setData(_)}return f=new u(t,e,r,l,h,a.extent,this.hitTestCanvas_,this.options_),f.render(),f}return null},f.prototype.dispose=function(){this.dataProvider_.removeEventListener("update",this.onDataProviderUpdate_),this.spatialProvider_.removeEventListener("update",this.onSpatialProviderUpdate_),this.rowMap_={},this.spatialMap_={},this.cache_.removeAll(),this.onTileDrop_=o,a.map.provider.RemoteTileProvider.prototype.dispose.call(this)},t.exports=f},function(t,e,r){"use strict";var n=r(1)(),i=r(14),o=r(15),a=function(t,e,r,i,o,a,s,u){n.map.provider.Tile.call(this,t,e,r,i),this.spatials_=o,this.layerExtent_=a,this.hitTestCanvas_=s,this.options_=u,this.valid=!1};a.prototype=Object.create(n.map.provider.Tile.prototype),a.prototype.constructor=a,a.prototype.render=function(t){var e=t?this.hitTestCanvas_:this.data,r=e.getContext("2d");t&&r.clearRect(0,0,e.width,e.height),r.save();var n=this.options_.tileSize/this.layerExtent_;r.setTransform(n,0,0,n,0,0);for(var a=i(this.z),s=0;s<this.spatials_.length;s++){var u=this.spatials_[s],c=u.getData(),l=this.options_.rowToStyle,f=this.options_.defaultStyle,h={};if(Object.assign(h,a,f(this.z,u.state),c?l(c,this.z,u.state):{}),r.lineJoin=h.lineJoin,r.lineCap=h.lineCap,r.lineWidth=h.lineWidth/n,t){var p=o.intToRGB(u.colorCode);r.strokeStyle=p,r.fillStyle=p}else r.strokeStyle=h.strokeColor,r.fillStyle=h.fillColor;u.render(r)}r.restore(),t||(this.valid=!0)},a.prototype.getObjectsAt=function(t,e){var r=this.hitTestCanvas_.getContext("2d");this.render(!0);var n=r.getImageData(t,e,1,1).data;if(o.isAntialiased(n))return[];for(var i=o.RGBToInt(n),a=[],s=0;s<this.spatials_.length;s++){var u=this.spatials_[s];u.colorCode===i&&a.push(u)}return a};var s=n.map.render.p2d.RenderEngine.prototype;for(var u in s)if("getObjectsAt"!==u&&s[u]===s.getObjectsAt){a.prototype[u]=a.prototype.getObjectsAt;break}t.exports=a},function(t,e,r){"use strict";var n=r(1)(),i=r(42),o=r(13),a=r(2),s=r(6).bind(null,"SpatialLayer"),u=r(14),c=r(45),l=r(16),f="DEFAULT_STATE",h=function t(e,r,i){var o=Object.assign({},p,i);if(!(e instanceof a))throw new TypeError("\n            SpatialLayer: the data provider must be H.datalens.Provider\n        ");if(!(r instanceof l))throw new TypeError("\n            SpatialLayer: the spatial provider must be\n            H.datalens.SpatialTileProvider\n        ");if("function"!=typeof o.rowToSpatialId)throw new TypeError("\n            SpatialLayer: rowToSpatialId must be a function\n        ");if("function"!=typeof o.featureToSpatialId)throw new TypeError("\n            SpatialLayer: featureToSpatialId must be a function\n        ");if("function"!=typeof o.dataToRows)throw new TypeError("SpatialLayer: dataToRows must be a function");if("function"!=typeof o.rowToStyle)throw new TypeError("SpatialLayer: rowToStyle must be a function");if("function"!=typeof o.defaultStyle)throw new TypeError("SpatialLayer: defaultStyle must be a function");this.provider_=new t.Provider_(e,r,o),n.map.layer.TileLayer.call(this,this.provider_,o)};h.prototype=Object.create(n.map.layer.TileLayer.prototype),h.prototype.constructor=h,h.prototype.dispose=function(){this.provider_.dispose(),n.map.layer.TileLayer.prototype.dispose.call(this)},h.prototype.redraw=function(){this.provider_.reload()},h.prototype.updateSpatialStyle=function(t,e){this.provider_.updateSpatialStyle(t,e)},h.Provider_=i,h.DEFAULT_STATE=f,h.Spatial=o,h.defaultDataToRows=s;var p={dataToRows:h.defaultDataToRows,defaultStyle:u,rowToStyle:c};t.exports=h},function(t,e){"use strict";t.exports=function(){return{fillColor:"yellow"}}},function(t,e,r){(function(e,r,n){/* @preserve
	 * The MIT License (MIT)
	 * 
	 * Copyright (c) 2013-2015 Petka Antonov
	 * 
	 * Permission is hereby granted, free of charge, to any person obtaining a copy
	 * of this software and associated documentation files (the "Software"), to deal
	 * in the Software without restriction, including without limitation the rights
	 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 * copies of the Software, and to permit persons to whom the Software is
	 * furnished to do so, subject to the following conditions:
	 * 
	 * The above copyright notice and this permission notice shall be included in
	 * all copies or substantial portions of the Software.
	 * 
	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
	 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	 * THE SOFTWARE.
	 * 
	 */
!function(e){t.exports=e()}(function(){var t,i,o;return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,r,n){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function o(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function a(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var u;try{throw new Error}catch(t){u=t}var c=t("./schedule"),l=t("./queue"),f=t("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,r){r?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(i.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?o.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},i.prototype.invoke=function(t,e,r){this._trampolineEnabled?a.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(t,e,r){this._normalQueue.unshift(t,e,r),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},r.exports=i,r.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var c=r(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,a,void 0,l,h),c._then(s,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,r){return t.resolve(r).bind(e)}}},{}],4:[function(t,e,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=n,e.exports=o},{"./promise":22}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){function r(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+s.classString(t)+" has no method '"+s.toString(r)+"'";throw new e.TypeError(i)}return n}function n(t){var e=this.pop(),n=r(t,e);return n.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),u=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(n,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,r="number"==typeof t;if(r)e=o;else if(u){var n=a(t);e=null!==n?n:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var r=t._cancellationParent;if(null==r||!r._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=r}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var r=0;r<t.length;++r)this._doInvokeOnCancel(t[r],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=a(t).call(this._boundValue());n===s&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,r){"use strict";e.exports=function(e){function r(t,r,s){return function(u){var c=s._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(r).call(c,u)}else if("function"==typeof f){var h=o(f).call(c,u);if(h===a)return h;if(h)return o(r).call(c,u)}else if(n.isObject(u)){for(var p=i(f),d=0;d<p.length;++d){var v=p[d];if(f[v]!=u[v])continue t}return o(r).call(c,u)}}return e}}var n=t("./util"),i=t("./es5").keys,o=n.tryCatch,a=n.errorObj;return r}},{"./es5":13,"./util":36}],8:[function(t,e,r){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(n())}function r(){if(i)return new e}function n(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=r,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var r=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=r,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=u,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=n,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,r,n){"use strict";r.exports=function(r,n){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,r){var n=this;try{t(e,r,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+U.toString(t));n._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?U.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function u(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!==(1&e)){this._cancellationParent=t;var r=t._branchesRemainingToCancel;void 0===r&&(r=0),t._branchesRemainingToCancel=r+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(){var t=this._boundTo;return void 0!==t&&t instanceof r?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new F(this._peekContext())}function v(t,e){if(H(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=S(t);U.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),U.notEnumerableProp(t,"__stackCleaned__",!0)}}}function y(t,e,r,n,i){if(void 0===t&&null!==e&&$){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&n._bitField))return;r&&(r+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),u=T(s),c=u.length-1;c>=0;--c){var l=u[c];if(!q.test(l)){var f=l.match(V);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0)for(var h=u[0],c=0;c<s.length;++c)if(s[c]===h){c>0&&(a="\n"+s[c-1]);break}}var p="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(p,!0,e)}}function m(t,e){var r=t+" is deprecated and will be removed in a future version.";return e&&(r+=" Use "+e+" instead."),_(r)}function _(t,e,n){if(at.warnings){var i,o=new I(t);if(e)n._attachExtraTrace(o);else if(at.longStackTraces&&(i=r._peekContext()))i.attachExtraTrace(o);else{var a=S(o);o.stack=a.message+"\n"+a.stack.join("\n")}et("warning",o)||E(o,"",!0)}}function g(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],a=-1,s=n.length-1;s>=0;--s)if(n[s]===o){a=s;break}for(var s=a;s>=0;--s){var u=n[s];if(e[i]!==u)break;e.pop(),i--}e=n}}function T(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i="    (No stack trace)"===n||B.test(n),o=i&&nt(n);i&&!o&&(X&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function x(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||B.test(n))break}return r>0&&(e=e.slice(r)),e}function S(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?x(t):["    (No stack trace)"],{message:r,stack:T(e)}}function E(t,e,r){if("undefined"!=typeof console){var n;if(U.isObject(t)){var i=t.stack;n=e+Y(i,t)}else n=e+String(t);"function"==typeof D?D(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function M(t,e,r,n){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(n):e(r,n))}catch(t){N.throwLater(t)}"unhandledRejection"===t?et(t,r,n)||i||E(r,"Unhandled rejection "):et(t,n)}function k(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():U.toString(t);var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(e))try{var n=JSON.stringify(t);e=n}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+j(e)+">, no stack trace)"}function j(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function C(){return"function"==typeof ot}function P(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function A(t,e){if(C()){for(var r,n,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u){var c=P(i[u]);if(c){r=c.fileName,a=c.line;break}}for(var u=0;u<o.length;++u){var c=P(o[u]);if(c){n=c.fileName,s=c.line;break}}a<0||s<0||!r||!n||r!==n||a>=s||(nt=function(t){if(z.test(t))return!0;var e=P(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=s)})}}function F(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,F),e>32&&this.uncycle()}var O,R,D,L=r._getDomain,N=r._async,I=t("./errors").Warning,U=t("./util"),H=U.canAttachTrace,z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,V=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,B=null,Y=null,X=!1,G=!(0==U.env("BLUEBIRD_DEBUG")),Q=!(0==U.env("BLUEBIRD_WARNINGS")||!G&&!U.env("BLUEBIRD_WARNINGS")),W=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),$=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Q||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},r.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),N.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){M("rejectionHandled",O,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),M("unhandledRejection",R,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(t,e,r){return _(t,e,r||this)},r.onPossiblyUnhandledRejection=function(t){var e=L();R="function"==typeof t?null===e?t:U.domainBind(e,t):void 0},r.onUnhandledRejectionHandled=function(t){var e=L();O="function"==typeof t?null===e?t:U.domainBind(e,t):void 0};var J=function(){};r.longStackTraces=function(){if(N.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&C()){var t=r.prototype._captureStackTrace,e=r.prototype._attachExtraTrace;at.longStackTraces=!0,J=function(){if(N.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=t,r.prototype._attachExtraTrace=e,n.deactivateLongStackTraces(),N.enableTrampoline(),at.longStackTraces=!1},r.prototype._captureStackTrace=d,r.prototype._attachExtraTrace=v,n.activateLongStackTraces(),N.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return at.longStackTraces&&C()};var Z=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return U.global.dispatchEvent(t),function(t,e){var r=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!U.global.dispatchEvent(r)}}if("function"==typeof Event){var t=new Event("CustomEvent");return U.global.dispatchEvent(t),function(t,e){var r=new Event(t.toLowerCase(),{cancelable:!0});return r.detail=e,!U.global.dispatchEvent(r)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(t),function(t,e){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t.toLowerCase(),!1,!0,e),!U.global.dispatchEvent(r)}}catch(t){}return function(){return!1}}(),K=function(){return U.isNode?function(){return e.emit.apply(e,arguments)}:U.global?function(t){var e="on"+t.toLowerCase(),r=U.global[e];return!!r&&(r.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,r){return{promise:e,child:r}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,r){return{reason:e,promise:r}},rejectionHandled:i},et=function(t){var e=!1;try{e=K.apply(null,arguments)}catch(t){N.throwLater(t),e=!0}var r=!1;try{r=Z(t,tt[t].apply(null,arguments))}catch(t){N.throwLater(t),r=!0}return r||e};r.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?r.longStackTraces():!t.longStackTraces&&r.hasLongStackTraces()&&J()),"warnings"in t){var e=t.warnings;at.warnings=!!e,$=at.warnings,U.isObject(e)&&"wForgottenReturn"in e&&($=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(N.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=l,r.prototype._propagateFrom=f,r.prototype._onCancel=u,r.prototype._setOnCancel=c,r.prototype._attachCancellationCallback=s,r.prototype._execute=a,rt=f,at.cancellation=!0}"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,r.prototype._fireEvent=et):!t.monitoring&&at.monitoring&&(at.monitoring=!1,r.prototype._fireEvent=o))},r.prototype._fireEvent=o,r.prototype._execute=function(t,e,r){try{t(e,r)}catch(t){return t}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(t){},r.prototype._attachCancellationCallback=function(t){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(t,e){};var rt=h,nt=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(F,Error),n.CapturedTrace=F,F.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;n<t;++n){var a=e[n].stack,s=r[a];if(void 0!==s&&s!==n){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var u=n>0?e[n-1]:this;s<t-1?(u._parent=e[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=n-2;l>=0;--l)e[l]._length=c,c++;return}}}},F.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=S(t),r=e.message,n=[e.stack],i=this;void 0!==i;)n.push(T(i.stack.split("\n"))),i=i._parent;w(n),b(n),U.notEnumerableProp(t,"stack",g(r,n)),U.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():k(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,B=t,Y=e;var r=Error.captureStackTrace;return nt=function(t){return z.test(t)},function(t,e){Error.stackTraceLimit+=6,r(t,e),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return B=/@/,Y=e,X=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(Y=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?k(e):e.toString()},null):(B=t,Y=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(t){console.warn(t)},U.isNode&&e.stderr.isTTY?D=function(t,e){var r=e?"[33m":"[31m";console.warn(r+t+"[0m\n")}:U.isNode||"string"!=typeof(new Error).stack||(D=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:Q,longStackTraces:!1,cancellation:!1,monitoring:!1};return W&&r.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return rt},boundValueFunction:function(){return p},checkForgottenReturns:y,setBounds:A,warn:_,deprecated:m,CapturedTrace:F,fireDomEvent:Z,fireGlobalEvent:K}}},{"./errors":12,"./util":36}],10:[function(t,e,r){"use strict";e.exports=function(t){function e(){return this.value}function r(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(r){return r instanceof t&&r.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:r},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(r,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:t},void 0);var e=arguments[1],n=function(){throw e};return this.caught(t,n)},t.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof t&&r.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:r},void 0);var n=arguments[1];n instanceof t&&n.suppressUnhandledRejections();var i=function(){return n};return this.caught(r,i)}}},{}],11:[function(t,e,r){"use strict";e.exports=function(t,e){function r(){return o(this)}function n(t,r){return i(t,r,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(r,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,n){return i(t,n,e,0)._then(r,void 0,void 0,t,void 0)},t.mapSeries=n}},{}],12:[function(t,e,r){"use strict";function n(t,e){function r(n){return this instanceof r?(f(this,"message","string"==typeof n?n:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return l(r,Error),r}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,s=t("./es5"),u=s.freeze,c=t("./util"),l=c.inherits,f=c.notEnumerableProp,h=n("Warning","warning"),p=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),v=n("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=n("TypeError","type error"),a=n("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(v.prototype[y[m]]=Array.prototype[y[m]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var _=0;v.prototype.toString=function(){var t=Array(4*_+1).join(" "),e="\n"+t+"AggregateError of:\n";_++,t=Array(4*_+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\n"),e+=n+"\n"}return _--,e},l(i,Error);var g=Error.__BluebirdErrorTypes__;g||(g=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},u=function(t,e){return{value:t[e]}},c=function(t,e,r){return t[e]=r.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(t){return a}},h=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:h,keys:s,names:s,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],15:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,e,r){this.promise=t,this.type=e,this.handler=r,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return u.call(this,this.promise._target()._settledValue())}function s(t){if(!o(this,t))return f.e=t,f}function u(t){var n=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(n._boundValue()):u.call(n._boundValue(),t);if(void 0!==c){n._setReturnedNonUndefined();var h=r(c,n);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var p=new l("late cancellation observer");return n._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(a,s,void 0,this,void 0)}}}return n.isRejected()?(o(this),f.e=t,f):(o(this),t)}var c=t("./util"),l=e.CancellationError,f=c.errorObj;return n.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,r,i){return"function"!=typeof t?this.then():this._then(r,i,void 0,new n(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},n}},{"./util":36}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function s(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var a=p(r[o])(t);if(n._popContext(),a===h){n._pushContext();var s=e.reject(h.e);return n._popContext(),s}var u=i(a,n);if(u instanceof e)return u}return null}function u(t,r,i,o){if(a.cancellation()){var s=new e(n),u=this._finallyPromise=new e(n);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{var c=this._promise=new e(n);c._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var c=t("./errors"),l=c.TypeError,f=t("./util"),h=f.errorObj,p=f.tryCatch,d=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,r="undefined"!=typeof this._generator.return;if(r)this._promise._pushContext(),t=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=p(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(t){var r=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(t.e,!1);var n=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var o=i(n,this._promise);if(!(o instanceof e)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(e).yieldHandler,n=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new u(t,this),i=n.promise();
return n._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}var i=[].slice.call(arguments);t&&i.pop();var n=new r(i).promise();return void 0!==t?n.spread(t):n}}},{"./util":36}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function s(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:l.domainBind(i,e),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function u(t,r,i,o){if("function"!=typeof r)return n("expecting a function but got "+l.classString(r));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(t,r,a,o).promise()}var c=e._getDomain,l=t("./util"),f=l.tryCatch,h=l.errorObj,p=e._async;l.inherits(s,r),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(r<0){if(r=r*-1-1,n[r]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return n[r]=t,this._queue.push(r),!1;null!==s&&(s[r]=t);var c=this._promise,l=this._callback,p=c._boundValue();c._pushContext();var d=f(l).call(p,t,r,o),v=c._popContext();if(a.checkForgottenReturns(d,v,null!==s?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var y=i(d,this._promise);if(y instanceof e){y=y._target();var m=y._bitField;if(0===(50397184&m))return u>=1&&this._inFlight++,n[r]=y,y._proxy(this,(r+1)*-1),!1;if(0===(33554432&m))return 0!==(16777216&m)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}n[r]=d}var _=++this._totalResolved;return _>=o&&(null!==s?this._filter(n,s):this._resolve(n),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;o<r;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,r,n){return u(t,e,r,n)}}},{"./util":36}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=s(t).apply(this,arguments),a=n._popContext();return o.checkForgottenReturns(i,a,"Promise.method",n),n._resolveFromSyncValue(i),n}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var n=new e(r);n._captureStackTrace(),n._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=a.isArray(c)?s(t).apply(l,c):s(t).call(l,c)}else u=s(t)();var f=n._popContext();return o.checkForgottenReturns(u,f,"Promise.try",n),n._resolveFromSyncValue(u),n},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=l.keys(t),i=0;i<r.length;++i){var o=r[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(r,n){if(null!==t){if(r){var o=i(s(r));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(n);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,u=t("./errors"),c=u.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=s(e).apply(r._boundValue(),[null].concat(t));i===u&&a.throwLater(i.e)}function n(t,e){var r=this,n=r._boundValue(),i=void 0===t?s(e).call(n,null):s(e).call(n,null,t);i===u&&a.throwLater(i.e)}function i(t,e){var r=this;if(!t){var n=new Error(t+"");n.cause=t,t=n}var i=s(e).call(r._boundValue(),t);i===u&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,r,n){"use strict";r.exports=function(){function n(){}function i(t,e){if("function"!=typeof e)throw new g("expecting a function but got "+d.classString(e));if(t.constructor!==o)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function o(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==w&&(i(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function u(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new o.PromiseInspection(this._target())},h=function(t){return o.reject(new g(t))},p={},d=t("./util");c=d.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},d.notEnumerableProp(o,"_getDomain",c);var v=t("./es5"),y=t("./async"),m=new y;v.defineProperty(o,"_async",{value:m});var _=t("./errors"),g=o.TypeError=_.TypeError;o.RangeError=_.RangeError;var b=o.CancellationError=_.CancellationError;o.TimeoutError=_.TimeoutError,o.OperationalError=_.OperationalError,o.RejectionError=_.OperationalError,o.AggregateError=_.AggregateError;var w=function(){},T={},x={},S=t("./thenables")(o,w),E=t("./promise_array")(o,w,S,h,n),M=t("./context")(o),k=M.create,j=t("./debuggability")(o,M),C=(j.CapturedTrace,t("./finally")(o,S)),P=t("./catch_filter")(x),A=t("./nodeback"),F=d.errorObj,O=d.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,n=new Array(e-1),i=0;for(r=0;r<e-1;++r){var o=arguments[r];if(!d.isObject(o))return h("expecting an object but got A catch statement predicate "+d.classString(o));n[i++]=o}return n.length=i,t=arguments[r],this.then(void 0,P(n,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(t,e){if(j.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+d.classString(t);arguments.length>1&&(r+=", "+d.classString(e)),this._warn(r)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){var r=this._then(t,e,void 0,void 0,void 0);r._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?h("expecting a function but got "+d.classString(t)):this.all()._then(t,void 0,void 0,T,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},o.prototype.error=function(t){return this.caught(d.originatesFromRejection,t)},o.getNewLibraryCopy=r.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=O(t)(A(e,r));return n===F&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new E(t).promise()},o.cast=function(t){var e=S(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+d.classString(t));return m.setScheduler(t)},o.prototype._then=function(t,e,r,n,i){var a=void 0!==i,s=a?i:new o(w),u=this._target(),l=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!==(2097152&this._bitField)&&(n=0!==(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=c();if(0!==(50397184&l)){var h,p,v=u._settlePromiseCtx;0!==(33554432&l)?(p=u._rejectionHandler0,h=t):0!==(16777216&l)?(p=u._fulfillmentHandler0,h=e,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),u._attachExtraTrace(p),h=e),m.invoke(v,u,{handler:null===f?h:"function"==typeof h&&d.domainBind(f,h),promise:s,receiver:n,value:p})}else u._addCallbacks(t,e,s,n,f);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==p)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),r=t._rejectionHandler0,n=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,r,n,i,null)},o.prototype._migrateCallbackAt=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(r,n,i,o,null)},o.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=r,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:d.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:d.domainBind(i,e));else{var a=4*o-4;this[a+2]=r,this[a+3]=n,"function"==typeof t&&(this[a+0]=null===i?t:d.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:d.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var r=S(t,this);if(!(r instanceof o))return this._fulfill(t);e&&this._propagateFrom(r,2);var n=r._target();if(n===this)return void this._reject(l());var i=n._bitField;if(0===(50397184&i)){var a=this._length();a>0&&n._migrateCallback0(this);for(var s=1;s<a;++s)n._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!==(33554432&i))this._fulfill(n._value());else if(0!==(16777216&i))this._reject(n._reason());else{var u=new b("late cancellation observer");n._attachExtraTrace(u),this._reject(u)}}},o.prototype._rejectCallback=function(t,e,r){var n=d.ensureErrorObject(t),i=n===t;if(!i&&!r&&j.warnings()){var o="a promise was rejected with a non-error: "+d.classString(t);this._warn(o,!0)}this._attachExtraTrace(n,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,r)});r=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)},o.prototype._settlePromiseFromHandler=function(t,e,r,n){var i=n._bitField;if(0===(65536&i)){n._pushContext();var o;e===T?r&&"number"==typeof r.length?o=O(t).apply(this._boundValue(),r):(o=F,o.e=new g("cannot .spread() a non-array: "+d.classString(r))):o=O(t).call(e,r);var a=n._popContext();i=n._bitField,0===(65536&i)&&(o===x?n._reject(r):o===F?n._rejectCallback(o.e,!1):(j.checkForgottenReturns(o,a,"",n,this),n._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,r,i){var a=t instanceof o,s=this._bitField,u=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),r instanceof C&&r.isFinallyHandler()?(r.cancelPromise=t,O(e).call(r,i)===F&&t._reject(F.e)):e===f?t._fulfill(f.call(r)):r instanceof n?r._promiseCancelled(t):a||t instanceof E?t._cancel():r.cancel()):"function"==typeof e?a?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,i,t)):e.call(r,i,t):r instanceof n?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(i,t):r._promiseRejected(i,t)):a&&(u&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,r=t.promise,n=t.receiver,i=t.value;"function"==typeof e?r instanceof o?this._settlePromiseFromHandler(e,n,i,r):e.call(n,i,r):r instanceof o&&r._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var r=l();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():m.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?m.fatalError(t,d.isNode):void((65535&e)>0?m.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(t,e){for(var r=1;r<t;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,e)}},o.prototype._rejectPromises=function(t,e){for(var r=1;r<t;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,t),this._rejectPromises(e,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){j.deprecated("Promise.defer","new Promise");var t=new o(w);return{promise:t,resolve:a,reject:s}},d.notEnumerableProp(o,"_makeSelfResolutionError",l),t("./method")(o,w,S,h,j),t("./bind")(o,w,S,j),t("./cancel")(o,E,h,j),t("./direct_resolve")(o),t("./synchronous_inspection")(o),t("./join")(o,E,S,w,m,c),o.Promise=o,o.version="3.4.6",t("./map.js")(o,E,h,S,w,j),t("./call_get.js")(o),t("./using.js")(o,h,S,k,w,j),t("./timers.js")(o,w,j),t("./generators.js")(o,h,w,S,n,j),t("./nodeify.js")(o),t("./promisify.js")(o,w),t("./props.js")(o,E,S,h),t("./race.js")(o,w,S,h),t("./reduce.js")(o,E,h,S,w,j),t("./settle.js")(o,E,j),t("./some.js")(o,E,h),t("./filter.js")(o,w),t("./each.js")(o,w),t("./any.js")(o),d.toFastProperties(o),d.toFastProperties(o.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new o(w)),j.setBounds(y.firstLineError,d.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var n=this._promise=new e(r);t instanceof e&&n._propagateFrom(t,3),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=t("./util");u.isArray;return u.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(r,o){var s=n(this._values,this._promise);if(s instanceof e){s=s._target();var c=s._bitField;if(this._values=s,0===(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0===(33554432&c))return 0!==(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(s=u.asArray(s),null===s){var l=i("expecting an array or an iterable object but got "+u.classString(s)).reason();return void this._promise._rejectCallback(l,!1)}return 0===s.length?void(o===-5?this._resolveEmptyArray():this._resolve(a(o))):void this._iterate(s)},s.prototype._iterate=function(t){var r=this.getActualLength(t.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<r;++s){var u=n(t[s],i);u instanceof e?(u=u._target(),a=u._bitField):a=null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0===(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!==(33554432&a)?this._promiseFulfilled(u._value(),s):0!==(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;return r>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var r=0;r<t.length;++r)t[r]instanceof e&&t[r].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return!T.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function o(t,e,r){var n=p.getDataPropertyOrDefault(t,e+r,b);return!!n&&i(n)}function a(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new _("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function s(t,e,r,n){for(var s=p.inheritedDataKeys(t),u=[],c=0;c<s.length;++c){var l=s[c],f=t[l],h=n===x||x(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!n(l,f,t,h)||u.push(l,f)}return a(u,e,r),u}function u(t,n,i,o,a,s){function u(){var i=n;n===h&&(i=this);var o=new e(r);o._captureStackTrace();var a="string"==typeof l&&this!==c?this[l]:t,u=d(o,s);try{a.apply(i,v(arguments,u))}catch(t){o._rejectCallback(y(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=t;return"string"==typeof l&&(t=o),p.notEnumerableProp(u,"__isPromisified__",!0),u}function c(t,e,r,n,i){for(var o=new RegExp(S(e)+"$"),a=s(t,e,o,r),u=0,c=a.length;u<c;u+=2){var l=a[u],f=a[u+1],d=l+e;if(n===E)t[d]=E(l,h,l,f,e,i);else{var v=n(f,function(){return E(l,h,l,f,e,i)});p.notEnumerableProp(v,"__isPromisified__",!0),t[d]=v}}return p.toFastProperties(t),t}function l(t,e,r){return E(t,e,void 0,t,null,r)}var f,h={},p=t("./util"),d=t("./nodeback"),v=p.withAppended,y=p.maybeWrapAsError,m=p.canEvaluate,_=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],T=new RegExp("^(?:"+w.join("|")+")$"),x=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},S=function(t){return t.replace(/([$])/,"\\$")},E=m?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new _("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var r=void 0===e.context?h:e.context,o=!!e.multiArgs,a=l(t,r,o);return p.copyDescriptors(t,a,n),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new _("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var r=!!e.multiArgs,n=e.suffix;"string"!=typeof n&&(n=g);var i=e.filter;"function"!=typeof i&&(i=x);var o=e.promisifier;if("function"!=typeof o&&(o=E),!p.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=p.inheritedDataKeys(t),s=0;s<a.length;++s){var u=t[a[s]];"constructor"!==a[s]&&p.isClass(u)&&(c(u.prototype,n,i,o,r),c(u,n,i,o,r))}return c(t,n,i,o,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){var e,r=!1;if(void 0!==s&&t instanceof s)e=f(t),r=!0;else{var n=l.keys(t),i=n.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=n[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=r,this._init$(void 0,-3)}function a(t){var r,a=n(t);return c(a)?(r=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&r._propagateFrom(a,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=t("./util"),c=u.isObject,l=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,n){this[e]=t,this[e+r]=n,e++}var e=0,r=0;return function(n){r=n.size,e=0;var i=new Array(2*n.size);return n.forEach(t,i),i}}(),h=function(t){for(var e=new s,r=t.length/2|0,n=0;n<r;++n){var i=t[r+n],o=t[n];e.set(i,o)}return e};u.inherits(o,r),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){var n;if(this._isMap)n=h(this._values);else{n={};for(var i=this.length(),o=0,a=this.length();o<a;++o)n[this._values[o+i]]=this._values[o]}return this._resolve(n),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;o<i;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,o){var u=n(t);if(u instanceof e)return s(u);if(t=a.asArray(t),null===t)return i("expecting an array or an iterable object but got "+a.classString(t));var c=new e(r);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function s(t,r,n,i){this.constructor$(t);var a=h();this._fn=null===a?r:p.domainBind(a,r),void 0!==n&&(n=e.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,r,i){if("function"!=typeof e)return n("expecting a function but got "+p.classString(e));var o=new s(t,e,r,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var r=i(this.value,this.array._promise);return r instanceof e?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(t){var r=this.array,n=r._promise,i=d(r._fn);n._pushContext();var o;o=void 0!==r._eachValues?i.call(n._boundValue(),t,this.index,this.length):i.call(n._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(r._currentCancellable=o);var s=n._popContext();return a.checkForgottenReturns(o,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n),o}var h=e._getDomain,p=t("./util"),d=p.tryCatch;p.inherits(s,r),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},s.prototype._iterate=function(t){this._values=t;var r,n,i=t.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=e.resolve(t[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var o={accum:null,value:t[n],index:n,length:i,array:this};r=r._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(u,u,void 0,r,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,r,n){return c(t,e,r,n)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,s=t("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var l=r.setImmediate,f=e.nextTick;a=s.isRecentNode?function(t){l.call(r,t)}:function(t){f.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var h=c.resolve();a=function(t){h.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof n?function(t){n(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:u:function(){var t=document.createElement("div"),e={attributes:!0},r=!1,n=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),r=!1});i.observe(n,e);var o=function(){r||(r=!0,n.classList.toggle("foo"))};return function(r){var n=new MutationObserver(function(){n.disconnect(),r()});n.observe(t,e),o()}}();i.exports=a},{"./util":36}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t)}var o=e.PromiseInspection,a=t("./util");a.inherits(i,r),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;return r>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var r=new o;return r._bitField=33554432,r._settledValueField=t,this._promiseResolved(e,r)},i.prototype._promiseRejected=function(t,e){var r=new o;return r._bitField=16777216,r._settledValueField=t,this._promiseResolved(e,r)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new i(t),o=r.promise();return r.setHowMany(e),r.init(),o}var a=t("./util"),s=t("./errors").RangeError,u=t("./errors").AggregateError,c=a.isArray,l={};a.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()));
}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var r=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return r.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,n){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===c){n&&n._pushContext();var u=e.reject(i.e);return n&&n._popContext(),u}if("function"==typeof i){if(a(t)){var u=new e(r);return t._then(u._fulfill,u._reject,void 0,u,null),u}return s(t,i,n)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return c.e=t,c}}function a(t){try{return f.call(t,"_promise0")}catch(t){return!1}}function s(t,n,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(r),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,h=u.tryCatch(n).call(t,o,a);return f=!1,s&&h===c&&(s._rejectCallback(h.e,!0,!0),s=null),l}var u=t("./util"),c=u.errorObj,l=u.isObject,f={}.hasOwnProperty;return n}},{"./util":36}],34:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var s=t("./util"),u=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var a,s;return void 0!==o?(a=e.resolve(o)._then(c,null,null,t,void 0),n.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(r),s=setTimeout(function(){a._fulfill()},+t),n.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,r){var n;n="string"!=typeof e?e instanceof Error?e:new u("operation timed out"):new u(e),s.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=r&&r.cancel()};e.prototype.timeout=function(t,e){t=+t;var r,s,u=new i(setTimeout(function(){r.isPending()&&f(r,e,s)},t));return n.cancellation()?(s=this.then(),r=s._then(o,a,void 0,u,void 0),r._setOnCancel(u)):r=this._then(o,a,void 0,u,void 0),r}}},{"./util":36}],35:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,a){function s(t){setTimeout(function(){throw t},0)}function u(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,r){function i(){if(a>=c)return l._fulfill();var o=u(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=n(o._getDisposer().tryDispose(r),t.promise)}catch(t){return s(t)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,c=t.length,l=new e(o);return i(),l}function l(t,e,r){this._data=t,this._promise=e,this._context=r}function f(t,e,r){this.constructor$(t,e,r)}function h(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),v=t("./errors").TypeError,y=t("./util").inherits,m=d.errorObj,_=d.tryCatch,g={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},l.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=e!==g?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},y(f,l),f.prototype.doDispose=function(t,e){var r=this.data();return r.call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,r=0;r<t;++r){var n=this[r];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("expecting a function but got "+d.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var u=new p(t),f=0;f<t;++f){var v=o[f];if(l.isDisposer(v)){var y=v;v=v.promise(),v._setDisposable(y)}else{var g=n(v);g instanceof e&&(v=g._then(h,null,null,{resources:u,index:f},void 0))}u[f]=v}for(var b=new Array(u.length),f=0;f<b.length;++f)b[f]=e.resolve(u[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var r=t[e];if(r.isRejected())return m.e=r.error(),m;if(!r.isFulfilled())return void w.cancel();t[e]=r.value()}T._pushContext(),i=_(i);var n=s?i.apply(void 0,t):i(t),o=T._popContext();return a.checkForgottenReturns(n,o,"Promise.using",T),n}),T=w.lastly(function(){var t=new e.PromiseInspection(w);return c(u,t)});return u.promise=T,T._setOnCancel(u),T},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(t,n,i){"use strict";function o(){try{var t=A;return A=null,t.apply(this,arguments)}catch(t){return P.e=t,P}}function a(t){return A=t,o}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function u(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return s(t)?new Error(_(t)):t}function l(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=t[r];return i[r]=e,i}function f(t,e,r){if(!j.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function h(t,e,r){if(s(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return j.defineProperty(t,e,n),t}function p(t){throw t}function d(t){try{if("function"==typeof t){var e=j.names(t.prototype),r=j.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=D.test(t+"")&&j.names(t).length>0;if(r||n||i)return!0}return!1}catch(t){return!1}}function v(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}function y(t){return L.test(t)}function m(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=e+i+r;return n}function _(t){try{return t+""}catch(t){return"[no string representation]"}}function g(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{h(t,"isOperational",!0)}catch(t){}}function w(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function T(t){return g(t)&&j.propertyIsWritable(t,"stack")}function x(t){return{}.toString.call(t)}function S(t,e,r){for(var n=j.names(t),i=0;i<n.length;++i){var o=n[i];if(r(o))try{j.defineProperty(e,o,j.getDescriptor(t,o))}catch(t){}}}function E(t,r){return H?e.env[t]:r}function M(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function k(t,e){return t.bind(e)}var j=t("./es5"),C="undefined"==typeof navigator,P={e:{}},A,F="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof r?r:void 0!==this?this:null,O=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},R=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1};if(j.isES5){var r=Object.getOwnPropertyNames;return function(t){for(var n=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=r(t)}catch(t){return n}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var u=Object.getOwnPropertyDescriptor(t,s);null!=u&&null==u.get&&null==u.set&&n.push(s)}}t=j.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(r){if(e(r))return[];var i=[];t:for(var o in r)if(n.call(r,o))i.push(o);else{for(var a=0;a<t.length;++a)if(n.call(t[a],o))continue t;i.push(o)}return i}}(),D=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,N=function(){return"stack"in new Error?function(t){return T(t)?t:new Error(_(t))}:function(t){if(T(t))return t;try{throw new Error(_(t))}catch(t){return t}}}(),I=function(t){return j.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,r=[],n=t[Symbol.iterator]();!(e=n.next()).done;)r.push(e.value);return r};I=function(t){return j.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?U(t):null}}var H="undefined"!=typeof e&&"[object process]"===x(e).toLowerCase(),z={isClass:d,isIdentifier:y,inheritedDataKeys:R,getDataPropertyOrDefault:f,thrower:p,isArray:j.isArray,asArray:I,notEnumerableProp:h,isPrimitive:s,isObject:u,isError:g,canEvaluate:C,errorObj:P,tryCatch:a,inherits:O,withAppended:l,maybeWrapAsError:c,toFastProperties:v,filledRange:m,toString:_,canAttachTrace:T,ensureErrorObject:N,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:x,copyDescriptors:S,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,env:E,global:F,getNativePromise:M,domainBind:k};z.isRecentNode=z.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),z.isNode&&z.toFastProperties(e);try{throw new Error}catch(t){z.lastLineError=t}n.exports=z},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,r(60),function(){return this}(),r(8).setImmediate)},function(t,e,r){!function(t,r){r(e)}(this,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r(t){return 1===t.length&&(t=n(t)),{left:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}}function n(t){return function(r,n){return e(t(r),n)}}function i(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function o(t){return null===t?NaN:+t}function a(t,e){var r,n,i=t.length,a=0,s=0,u=-1,c=0;if(null==e)for(;++u<i;)isNaN(r=o(t[u]))||(n=r-a,a+=n/++c,s+=n*(r-a));else for(;++u<i;)isNaN(r=o(e(t[u],u,t)))||(n=r-a,a+=n/++c,s+=n*(r-a));if(c>1)return s/(c-1)}function s(t,e){var r=a(t,e);return r?Math.sqrt(r):r}function u(t,e){var r,n,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n){r=i=n;break}for(;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else{for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n){r=i=n;break}for(;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]}function c(t){return function(){return t}}function l(t){return t}function f(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((e-t)/r)),o=new Array(i);++n<i;)o[n]=t+n*r;return o}function h(t,e,r){var n=p(t,e,r);return f(Math.ceil(t/n)*n,Math.floor(e/n)*n+n/2,n)}function p(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/i;return o>=L?i*=10:o>=N?i*=5:o>=I&&(i*=2),e<t?-i:i}function d(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function v(t){return+t}function y(){function t(t){var i,o,a=t.length,s=new Array(a);for(i=0;i<a;++i)s[i]=+e(t[i],i,t);var u=r(s),c=+u[0],l=+u[1],f=n(s,c,l);Array.isArray(f)||(f=h(c,l,+f));var p=f.length;for(i=0;i<p;++i)f[i]=+f[i];for(;f[0]<=c;)f.shift(),--p;for(;f[p-1]>=l;)f.pop(),--p;var d,v=new Array(p+1);for(i=0;i<=p;++i)d=v[i]=[],d.x0=i>0?f[i-1]:c,d.x1=i<p?f[i]:l;for(i=0;i<a;++i)o=s[i],c<=o&&o<=l&&v[R(f,o,0,p)].push(t[i]);return v}var e=l,r=u,n=d;return t.value=function(r){return arguments.length?(e="function"==typeof r?r:c(+r),t):e},t.domain=function(e){return arguments.length?(r="function"==typeof e?e:c([+e[0],+e[1]]),t):r},t.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:c(Array.isArray(e)?Array.prototype.map.call(e,v):+e),t):n},t}function m(t,e,r){if(null==r&&(r=o),n=t.length){if((e=+e)<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),u=+r(t[a+1],a+1,t);return s+(u-s)*(i-a)}}function _(t,r,n){return t.sort(e),Math.ceil((n-r)/(2*(m(t,.75)-m(t,.25))*Math.pow(t.length,-1/3)))}function g(t,e,r){return Math.ceil((r-e)/(3.5*s(t)*Math.pow(t.length,-1/3)))}function b(t,e){var r,n,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<o;)null!=(n=t[i])&&n>r&&(r=n)}else{for(;++i<o;)if(null!=(n=e(t[i],i,t))&&n>=n){r=n;break}for(;++i<o;)null!=(n=e(t[i],i,t))&&n>r&&(r=n)}return r}function w(t,e){var r,n=0,i=t.length,a=-1,s=i;if(null==e)for(;++a<i;)isNaN(r=o(t[a]))?--s:n+=r;else for(;++a<i;)isNaN(r=o(e(t[a],a,t)))?--s:n+=r;if(s)return n/s}function T(t,r){var n,i=[],a=t.length,s=-1;if(null==r)for(;++s<a;)isNaN(n=o(t[s]))||i.push(n);else for(;++s<a;)isNaN(n=o(r(t[s],s,t)))||i.push(n);return m(i.sort(e),.5)}function x(t){for(var e,r,n,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(r=new Array(a);--i>=0;)for(n=t[i],e=n.length;--e>=0;)r[--a]=n[e];return r}function S(t,e){var r,n,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<o;)null!=(n=t[i])&&r>n&&(r=n)}else{for(;++i<o;)if(null!=(n=e(t[i],i,t))&&n>=n){r=n;break}for(;++i<o;)null!=(n=e(t[i],i,t))&&r>n&&(r=n)}return r}function E(t){for(var e=0,r=t.length-1,n=t[0],i=new Array(r<0?0:r);e<r;)i[e]=[n,n=t[++e]];return i}function M(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n}function k(t,r){if(n=t.length){var n,i,o=0,a=0,s=t[a];for(r||(r=e);++o<n;)(r(i=t[o],s)<0||0!==r(s,s))&&(s=i,a=o);return 0===r(s,s)?a:void 0}}function j(t,e,r){for(var n,i,o=(null==r?t.length:r)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,n=t[o+e],t[o+e]=t[i+e],t[i+e]=n;return t}function C(t,e){var r,n=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(r=+t[o])&&(n+=r);else for(;++o<i;)(r=+e(t[o],o,t))&&(n+=r);return n}function P(t){if(!(i=t.length))return[];for(var e=-1,r=S(t,A),n=new Array(r);++e<r;)for(var i,o=-1,a=n[e]=new Array(i);++o<i;)a[o]=t[o][e];return n}function A(t){return t.length}function F(){return P(arguments)}var O=r(e),R=O.right,D=O.left,L=Math.sqrt(50),N=Math.sqrt(10),I=Math.sqrt(2),U="0.7.1";t.version=U,t.bisect=R,t.bisectRight=R,t.bisectLeft=D,t.ascending=e,t.bisector=r,t.descending=i,t.deviation=s,t.extent=u,t.histogram=y,t.thresholdFreedmanDiaconis=_,t.thresholdScott=g,t.thresholdSturges=d,t.max=b,t.mean=w,t.median=T,t.merge=x,t.min=S,t.pairs=E,t.permute=M,t.quantile=m,t.range=f,t.scan=k,t.shuffle=j,t.sum=C,t.ticks=h,t.tickStep=p,t.transpose=P,t.variance=a,t.zip=F})},function(t,e,r){!function(t,r){r(e)}(this,function(t){"use strict";function e(){}function r(t,r){var n=new e;if(t instanceof e)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==r)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(r(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}function n(){function t(e,i,o,a){if(i>=l.length)return u?u(e):n?e.sort(n):e;for(var s,c,f,h=-1,p=e.length,d=l[i++],v=r(),y=o();++h<p;)(f=v.get(s=d(c=e[h])+""))?f.push(c):v.set(s,[c]);return v.each(function(e,r){a(y,r,t(e,i,o,a))}),y}function e(t,r){if(r>=l.length)return t;var n=[],i=f[r++];return t.each(function(t,i){n.push({key:i,values:e(t,r)})}),i?n.sort(function(t,e){return i(t.key,e.key)}):n}var n,u,c,l=[],f=[];return c={object:function(e){return t(e,0,i,o)},map:function(e){return t(e,0,a,s)},entries:function(r){return e(t(r,0,a,s),0)},key:function(t){return l.push(t),c},sortKeys:function(t){return f[l.length-1]=t,c},sortValues:function(t){return n=t,c},rollup:function(t){return u=t,c}}}function i(){return{}}function o(t,e,r){t[e]=r}function a(){return r()}function s(t,e,r){t.set(e,r)}function u(){}function c(t,e){var r=new u;if(t instanceof u)t.each(function(t){r.add(t)});else if(t){var n=-1,i=t.length;if(null==e)for(;++n<i;)r.add(t[n]);else for(;++n<i;)r.add(e(t[n],n,t))}return r}function l(t){var e=[];for(var r in t)e.push(r);return e}function f(t){var e=[];for(var r in t)e.push(t[r]);return e}function h(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e}var p="$";e.prototype=r.prototype={constructor:e,has:function(t){return p+t in this},get:function(t){return this[p+t]},set:function(t,e){return this[p+t]=e,this},remove:function(t){var e=p+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===p&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===p&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===p&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===p&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===p&&++t;return t},empty:function(){for(var t in this)if(t[0]===p)return!1;return!0},each:function(t){for(var e in this)e[0]===p&&t(this[e],e.slice(1),this)}};var d=r.prototype;u.prototype=c.prototype={constructor:u,has:d.has,add:function(t){return t+="",this[p+t]=t,this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each};var v="0.1.2";t.version=v,t.nest=n,t.set=c,t.map=r,t.keys=l,t.values=f,t.entries=h})},function(t,e,r){!function(t,r){r(e)}(this,function(t){"use strict";function e(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function r(t){return t=e(Math.abs(t)),t?t[1]:NaN}function n(t,e){return function(r,n){for(var i=r.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),o.push(r.substring(i-=s,i+s)),!((u+=s+1)>n));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function i(t,e){t=t.toPrecision(e);t:for(var r,n=t.length,i=1,o=-1;i<n;++i)switch(t[i]){case".":o=r=i;break;case"0":0===o&&(o=i),r=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(r+1):t}function o(t,r){var n=e(t,r);if(!n)return t+"";var i=n[0],o=n[1],a=o-(d=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+e(t,Math.max(0,r+a-1))[0]}function a(t,r){var n=e(t,r);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}function s(t){return new u(t)}function u(t){if(!(e=y.exec(t)))throw new Error("invalid format: "+t);var e,r=e[1]||" ",n=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):v[l]||(l=""),(a||"0"===r&&"="===n)&&(a=!0,r="0",n="="),this.fill=r,this.align=n,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}function c(t){return t}function l(t){function e(t){function e(t){var e,a,s,c=_,v=g;if("c"===y)v=b(t)+v,t="";else{t=+t;var T=(t<0||1/t<0)&&(t*=-1,!0);if(t=b(t,p),T)for(e=-1,a=t.length,T=!1;++e<a;)if(s=t.charCodeAt(e),48<s&&s<58||"x"===y&&96<s&&s<103||"X"===y&&64<s&&s<71){T=!0;break}if(c=(T?"("===i?i:"-":"-"===i||"("===i?"":i)+c,v=v+("s"===y?m[8+d/3]:"")+(T&&"("===i?")":""),w)for(e=-1,a=t.length;++e<a;)if(s=t.charCodeAt(e),48>s||s>57){v=(46===s?u+t.slice(e+1):t.slice(e))+v,t=t.slice(0,e);break}}h&&!l&&(t=o(t,1/0));var x=c.length+t.length+v.length,S=x<f?new Array(f-x+1).join(r):"";switch(h&&l&&(t=o(S+t,S.length?f-v.length:1/0),S=""),n){case"<":return c+t+v+S;case"=":return c+S+t+v;case"^":return S.slice(0,x=S.length>>1)+c+t+v+S.slice(x)}return S+c+t+v}t=s(t);var r=t.fill,n=t.align,i=t.sign,c=t.symbol,l=t.zero,f=t.width,h=t.comma,p=t.precision,y=t.type,_="$"===c?a[0]:"#"===c&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",g="$"===c?a[1]:/[%p]/.test(y)?"%":"",b=v[y],w=!y||/[defgprs%]/.test(y);return p=null==p?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}function i(t,n){var i=e((t=s(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(r(n)/3))),a=Math.pow(10,-o),u=m[8+o/3];return function(t){return i(a*t)+u}}var o=t.grouping&&t.thousands?n(t.grouping,t.thousands):c,a=t.currency,u=t.decimal;return{format:e,formatPrefix:i}}function f(t){return Math.max(0,-r(Math.abs(t)))}function h(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(r(e)/3)))-r(Math.abs(t)))}function p(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,r(e)-r(t))+1}var d,v={"":i,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return a(100*t,e)},r:a,s:o,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},y=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],_=l({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),g=l({decimal:",",thousands:".",grouping:[3],currency:["",""]}),b=l({decimal:",",thousands:"",grouping:[3],currency:["","K"]}),w=l({decimal:",",thousands:"'",grouping:[3],currency:["","CHF"]}),T=l({decimal:",",thousands:".",grouping:[3],currency:["",""]}),x=l({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),S=l({decimal:".",thousands:",",grouping:[3],currency:["",""]}),E=l({decimal:",",thousands:".",grouping:[3],currency:["",""]}),M=l({decimal:",",thousands:"",grouping:[3],currency:["",""]}),k=l({decimal:",",thousands:"",grouping:[3],currency:["","$"]}),j=l({decimal:",",thousands:".",grouping:[3],currency:["",""]}),C=l({decimal:".",thousands:",",grouping:[3],currency:["",""]}),P=l({decimal:",",thousands:"",grouping:[3],currency:["","Ft"]}),A=l({decimal:",",thousands:".",grouping:[3],currency:["",""]}),F=l({decimal:".",thousands:",",grouping:[3],currency:["",""]}),O=l({decimal:".",thousands:",",grouping:[3],currency:["",""]}),R=l({decimal:",",thousands:".",grouping:[3],currency:["","."]}),D=l({decimal:",",thousands:".",grouping:[3],currency:["",""]}),L=l({decimal:",",thousands:".",grouping:[3],currency:["","z"]}),N=l({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),I=l({decimal:",",thousands:"",grouping:[3],currency:["","."]}),U=l({decimal:",",thousands:"",grouping:[3],currency:["","SEK"]}),H=l({decimal:".",thousands:",",grouping:[3],currency:["",""]}),z=_.format,q=_.formatPrefix,V="0.5.1";t.version=V,t.format=z,t.formatPrefix=q,t.formatLocale=l,t.formatCaEs=g,t.formatCsCz=b,t.formatDeCh=w,t.formatDeDe=T,t.formatEnCa=x,t.formatEnGb=S,t.formatEnUs=_,t.formatEsEs=E,t.formatFiFi=M,t.formatFrCa=k,t.formatFrFr=j,t.formatHeIl=C,t.formatHuHu=P,t.formatItIt=A,t.formatJaJp=F,t.formatKoKr=O,t.formatMkMk=R,t.formatNlNl=D,t.formatPlPl=L,t.formatPtBr=N,t.formatRuRu=I,t.formatSvSe=U,t.formatZhCn=H,t.formatSpecifier=s,t.precisionFixed=f,t.precisionPrefix=h,t.precisionRound=p})},function(t,e,r){!function(t,n){n(e,r(17))}(this,function(t,e){"use strict";function r(t){return function(){return t}}function n(t,e){return function(r){return t+r*e}}function i(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function o(t,e){var i=e-t;return i?n(t,i>180||i<-180?i-360*Math.round(i/360):i):r(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?s:function(e,n){return n-e?i(e,n,t):r(isNaN(e)?n:e)}}function s(t,e){var i=e-t;return i?n(t,i):r(isNaN(t)?e:t)}function u(t,e){var r,n=[],i=[],o=t?t.length:0,a=e?e.length:0,s=Math.min(o,a);for(r=0;r<s;++r)n.push(d(t[r],e[r]));for(;r<o;++r)i[r]=t[r];for(;r<a;++r)i[r]=e[r];return function(t){for(r=0;r<s;++r)i[r]=n[r](t);return i}}function c(t,e){return t=+t,e-=t,function(r){return t+e*r}}function l(t,e){var r,n={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(r in t)r in e?n[r]=d(t[r],e[r]):i[r]=t[r];for(r in e)r in t||(i[r]=e[r]);return function(t){for(r in n)i[r]=n[r](t);return i}}function f(t){return function(){return t}}function h(t){return function(e){return t(e)+""}}function p(t,e){var r,n,i,o=R.lastIndex=D.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(r=R.exec(t))&&(n=D.exec(e));)(i=n.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,u.push({i:a,x:c(r,n)})),o=D.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?h(u[0].x):f(e):(e=u.length,function(t){for(var r,n=0;n<e;++n)s[(r=u[n]).i]=r.x(t);return s.join("")})}function d(t,n){var i,o=typeof n;return null==n||"boolean"===o?r(n):("number"===o?c:"string"===o?(i=e.color(n))?(n=i,O):p:n instanceof e.color?O:Array.isArray(n)?u:l)(t,n)}function v(t,e){return t=+t,e-=t,function(r){return Math.round(t+e*r)}}function y(t,e,r,n,i,o){if(t*n===e*r)return null;var a=Math.sqrt(t*t+e*e);t/=a,e/=a;var s=t*r+e*n;r-=t*s,n-=e*s;var u=Math.sqrt(r*r+n*n);return r/=u,n/=u,s/=u,t*n<e*r&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*L,skewX:Math.atan(s)*L,scaleX:a,scaleY:u}}function m(t){if("none"===t)return N;C||(C=document.createElement("DIV"),P=document.documentElement,A=document.defaultView),C.style.transform=t,t=A.getComputedStyle(P.appendChild(C),null).getPropertyValue("transform"),P.removeChild(C);var e=t.slice(7,-1).split(",");return y(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5])}function _(t){F||(F=document.createElementNS("http://www.w3.org/2000/svg","g")),F.setAttribute("transform",null==t?"":t);var e=F.transform.baseVal.consolidate().matrix;return y(e.a,e.b,e.c,e.d,e.e,e.f)}function g(t,e,r,n){function i(t){return t.length?t.pop()+" ":""}function o(t,n,i,o,a,s){if(t!==i||n!==o){var u=a.push("translate(",null,e,null,r);s.push({i:u-4,x:c(t,i)},{i:u-2,x:c(n,o)})}else(i||o)&&a.push("translate("+i+e+o+r)}function a(t,e,r,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:r.push(i(r)+"rotate(",null,n)-2,x:c(t,e)})):e&&r.push(i(r)+"rotate("+e+n)}function s(t,e,r,o){t!==e?o.push({i:r.push(i(r)+"skewX(",null,n)-2,x:c(t,e)}):e&&r.push(i(r)+"skewX("+e+n)}function u(t,e,r,n,o,a){if(t!==r||e!==n){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:c(t,r)},{i:s-2,x:c(e,n)})}else 1===r&&1===n||o.push(i(o)+"scale("+r+","+n+")")}return function(e,r){var n=[],i=[];return e=t(e),r=t(r),o(e.translateX,e.translateY,r.translateX,r.translateY,n,i),a(e.rotate,r.rotate,n,i),s(e.skewX,r.skewX,n,i),u(e.scaleX,e.scaleY,r.scaleX,r.scaleY,n,i),e=r=null,function(t){for(var e,r=-1,o=i.length;++r<o;)n[(e=i[r]).i]=e.x(t);return n.join("")}}}function b(t){return((t=Math.exp(t))+1/t)/2}function w(t){return((t=Math.exp(t))-1/t)/2}function T(t){return((t=Math.exp(2*t))-1)/(t+1)}function x(t,e){var r,n,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-o,h=l*l+f*f;if(h<V)n=Math.log(c/a)/H,r=function(t){return[i+t*l,o+t*f,a*Math.exp(H*t*n)]};else{var p=Math.sqrt(h),d=(c*c-a*a+q*h)/(2*a*z*p),v=(c*c-a*a-q*h)/(2*c*z*p),y=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(v*v+1)-v);n=(m-y)/H,r=function(t){var e=t*n,r=b(y),s=a/(z*p)*(r*T(H*e+y)-w(y));return[i+s*l,o+s*f,a*r/b(H*e+y)]}}return r.duration=1e3*n,r}function S(t,r){var n=o((t=e.hsl(t)).h,(r=e.hsl(r)).h),i=s(t.s,r.s),a=s(t.l,r.l),u=s(t.opacity,r.opacity);return function(e){return t.h=n(e),t.s=i(e),t.l=a(e),t.opacity=u(e),t+""}}function E(t,r){var n=s((t=e.hsl(t)).h,(r=e.hsl(r)).h),i=s(t.s,r.s),o=s(t.l,r.l),a=s(t.opacity,r.opacity);return function(e){return t.h=n(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}function M(t,r){var n=s((t=e.lab(t)).l,(r=e.lab(r)).l),i=s(t.a,r.a),o=s(t.b,r.b),a=s(t.opacity,r.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}}function k(t,r){var n=o((t=e.hcl(t)).h,(r=e.hcl(r)).h),i=s(t.c,r.c),a=s(t.l,r.l),u=s(t.opacity,r.opacity);return function(e){return t.h=n(e),t.c=i(e),t.l=a(e),t.opacity=u(e),t+""}}function j(t,r){var n=s((t=e.hcl(t)).h,(r=e.hcl(r)).h),i=s(t.c,r.c),o=s(t.l,r.l),a=s(t.opacity,r.opacity);
return function(e){return t.h=n(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}var C,P,A,F,O=function t(r){function n(t,r){var n=i((t=e.rgb(t)).r,(r=e.rgb(r)).r),o=i(t.g,r.g),a=i(t.b,r.b),s=i(t.opacity,r.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=a(e),t.opacity=s(e),t+""}}var i=a(r);return n.gamma=t,n}(1),R=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D=new RegExp(R.source,"g"),L=180/Math.PI,N={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},I=g(m,"px, ","px)","deg)"),U=g(_,", ",")",")"),H=Math.SQRT2,z=2,q=4,V=1e-12,B=function t(r){function n(t,n){var i=o((t=e.cubehelix(t)).h,(n=e.cubehelix(n)).h),a=s(t.s,n.s),u=s(t.l,n.l),c=s(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=u(Math.pow(e,r)),t.opacity=c(e),t+""}}return r=+r,n.gamma=t,n}(1),Y=function t(r){function n(t,n){var i=s((t=e.cubehelix(t)).h,(n=e.cubehelix(n)).h),o=s(t.s,n.s),a=s(t.l,n.l),u=s(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,r)),t.opacity=u(e),t+""}}return r=+r,n.gamma=t,n}(1),X="0.7.0";t.version=X,t.interpolate=d,t.interpolateArray=u,t.interpolateNumber=c,t.interpolateObject=l,t.interpolateRound=v,t.interpolateString=p,t.interpolateTransformCss=I,t.interpolateTransformSvg=U,t.interpolateZoom=x,t.interpolateRgb=O,t.interpolateHsl=S,t.interpolateHslLong=E,t.interpolateLab=M,t.interpolateHcl=k,t.interpolateHclLong=j,t.interpolateCubehelix=B,t.interpolateCubehelixLong=Y})},function(t,e,r){!function(t,n){n(e,r(19))}(this,function(t,e){"use strict";function r(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function n(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){function e(t,e){return function(r){var n,i,o,a=[],s=-1,u=0,c=t.length;for(r instanceof Date||(r=new Date(+r));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=rt[n=t.charAt(++s)])?n=t.charAt(++s):i="e"===n?" ":"0",(o=e[n])&&(n=o(r,i)),a.push(n),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function o(t,e){return function(r){var o=i(1900),s=a(o,t,r+="",0);if(s!=r.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var u="Z"in o?n(i(o.y)).getUTCDay():e(i(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(u+5)%7:o.w+7*o.U-(u+6)%7}return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,n(o)):e(o)}}function a(t,e,r,n){for(var i,o,a=0,s=e.length,u=r.length;a<s;){if(n>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=Nt[i in rt?e.charAt(a++):i],!o||(n=o(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}function s(t,e,r){var n=Et.exec(e.slice(r));return n?(t.p=Mt[n[0].toLowerCase()],r+n[0].length):-1}function K(t,e,r){var n=Ct.exec(e.slice(r));return n?(t.w=Pt[n[0].toLowerCase()],r+n[0].length):-1}function tt(t,e,r){var n=kt.exec(e.slice(r));return n?(t.w=jt[n[0].toLowerCase()],r+n[0].length):-1}function et(t,e,r){var n=Ot.exec(e.slice(r));return n?(t.m=Rt[n[0].toLowerCase()],r+n[0].length):-1}function nt(t,e,r){var n=At.exec(e.slice(r));return n?(t.m=Ft[n[0].toLowerCase()],r+n[0].length):-1}function it(t,e,r){return a(t,mt,e,r)}function ot(t,e,r){return a(t,_t,e,r)}function at(t,e,r){return a(t,gt,e,r)}function st(t){return Tt[t.getDay()]}function ut(t){return wt[t.getDay()]}function ct(t){return St[t.getMonth()]}function lt(t){return xt[t.getMonth()]}function ft(t){return bt[+(t.getHours()>=12)]}function ht(t){return Tt[t.getUTCDay()]}function pt(t){return wt[t.getUTCDay()]}function dt(t){return St[t.getUTCMonth()]}function vt(t){return xt[t.getUTCMonth()]}function yt(t){return bt[+(t.getUTCHours()>=12)]}var mt=t.dateTime,_t=t.date,gt=t.time,bt=t.periods,wt=t.days,Tt=t.shortDays,xt=t.months,St=t.shortMonths,Et=u(bt),Mt=c(bt),kt=u(wt),jt=c(wt),Ct=u(Tt),Pt=c(Tt),At=u(xt),Ft=c(xt),Ot=u(St),Rt=c(St),Dt={a:st,A:ut,b:ct,B:lt,c:null,d:S,e:S,H:E,I:M,j:k,L:j,m:C,M:P,p:ft,S:A,U:F,w:O,W:R,x:null,X:null,y:D,Y:L,Z:N,"%":Z},Lt={a:ht,A:pt,b:dt,B:vt,c:null,d:I,e:I,H:U,I:H,j:z,L:q,m:V,M:B,p:yt,S:Y,U:X,w:G,W:Q,x:null,X:null,y:W,Y:$,Z:J,"%":Z},Nt={a:K,A:tt,b:et,B:nt,c:it,d:m,e:m,H:g,I:g,j:_,L:T,m:y,M:b,p:s,S:w,U:f,w:l,W:h,x:ot,X:at,y:d,Y:p,Z:v,"%":x};return Dt.x=e(_t,Dt),Dt.X=e(gt,Dt),Dt.c=e(mt,Dt),Lt.x=e(_t,Lt),Lt.X=e(gt,Lt),Lt.c=e(mt,Lt),{format:function(t){var r=e(t+="",Dt);return r.toString=function(){return t},r},parse:function(t){var e=o(t+="",r);return e.toString=function(){return t},e},utcFormat:function(t){var r=e(t+="",Lt);return r.toString=function(){return t},r},utcParse:function(t){var e=o(t,n);return e.toString=function(){return t},e}}}function a(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function s(t){return t.replace(ot,"\\$&")}function u(t){return new RegExp("^(?:"+t.map(s).join("|")+")","i")}function c(t){for(var e={},r=-1,n=t.length;++r<n;)e[t[r].toLowerCase()]=r;return e}function l(t,e,r){var n=nt.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function f(t,e,r){var n=nt.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function h(t,e,r){var n=nt.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function p(t,e,r){var n=nt.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function d(t,e,r){var n=nt.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function v(t,e,r){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function y(t,e,r){var n=nt.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function m(t,e,r){var n=nt.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function _(t,e,r){var n=nt.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function g(t,e,r){var n=nt.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function b(t,e,r){var n=nt.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function w(t,e,r){var n=nt.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function T(t,e,r){var n=nt.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function x(t,e,r){var n=it.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function S(t,e){return a(t.getDate(),e,2)}function E(t,e){return a(t.getHours(),e,2)}function M(t,e){return a(t.getHours()%12||12,e,2)}function k(t,r){return a(1+e.timeDay.count(e.timeYear(t),t),r,3)}function j(t,e){return a(t.getMilliseconds(),e,3)}function C(t,e){return a(t.getMonth()+1,e,2)}function P(t,e){return a(t.getMinutes(),e,2)}function A(t,e){return a(t.getSeconds(),e,2)}function F(t,r){return a(e.timeSunday.count(e.timeYear(t),t),r,2)}function O(t){return t.getDay()}function R(t,r){return a(e.timeMonday.count(e.timeYear(t),t),r,2)}function D(t,e){return a(t.getFullYear()%100,e,2)}function L(t,e){return a(t.getFullYear()%1e4,e,4)}function N(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+a(e/60|0,"0",2)+a(e%60,"0",2)}function I(t,e){return a(t.getUTCDate(),e,2)}function U(t,e){return a(t.getUTCHours(),e,2)}function H(t,e){return a(t.getUTCHours()%12||12,e,2)}function z(t,r){return a(1+e.utcDay.count(e.utcYear(t),t),r,3)}function q(t,e){return a(t.getUTCMilliseconds(),e,3)}function V(t,e){return a(t.getUTCMonth()+1,e,2)}function B(t,e){return a(t.getUTCMinutes(),e,2)}function Y(t,e){return a(t.getUTCSeconds(),e,2)}function X(t,r){return a(e.utcSunday.count(e.utcYear(t),t),r,2)}function G(t){return t.getUTCDay()}function Q(t,r){return a(e.utcMonday.count(e.utcYear(t),t),r,2)}function W(t,e){return a(t.getUTCFullYear()%100,e,2)}function $(t,e){return a(t.getUTCFullYear()%1e4,e,4)}function J(){return"+0000"}function Z(){return"%"}function K(t){return t.toISOString()}function tt(t){var e=new Date(t);return isNaN(e)?null:e}var et="0.3.2",rt={"-":"",_:" ",0:"0"},nt=/^\s*\d+/,it=/^%/,ot=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,at=o({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),st=o({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),ut=o({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ct=o({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),lt=o({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ft=o({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ht=o({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),pt=o({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"]}),dt=o({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["jan","fv","mar","avr","mai","jui","jul","ao","sep","oct","nov","dc"]}),vt=o({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]}),yt=o({dateTime:"%A, %e %B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]}),mt=o({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasrnap","htf","kedd","szerda","cstrtk","pntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["janur","februr","mrcius","prilis","mjus","jnius","jlius","augusztus","szeptember","oktber","november","december"],shortMonths:["jan.","feb.","mr.","pr.","mj.","jn.","jl.","aug.","szept.","okt.","nov.","dec."]}),_t=o({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),gt=o({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]}),bt=o({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]}),wt=o({dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]}),Tt=o({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),xt=o({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","r.","Czw.","Pt.","Sob."],months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Padz.","Listop.","Grudz."]}),St=o({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),Et=o({dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]}),Mt=o({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],shortDays:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),kt=o({dateTime:"%x %A %X",date:"%Y%-m%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]}),jt="%Y-%m-%dT%H:%M:%S.%LZ",Ct=Date.prototype.toISOString?K:at.utcFormat(jt),Pt=+new Date("2000-01-01T00:00:00.000Z")?tt:at.utcParse(jt),At=at.format,Ft=at.parse,Ot=at.utcFormat,Rt=at.utcParse;t.timeFormat=At,t.timeParse=Ft,t.utcFormat=Ot,t.utcParse=Rt,t.version=et,t.timeFormatLocale=o,t.timeFormatCaEs=st,t.timeFormatDeCh=ut,t.timeFormatDeDe=ct,t.timeFormatEnCa=lt,t.timeFormatEnGb=ft,t.timeFormatEnUs=at,t.timeFormatEsEs=ht,t.timeFormatFiFi=pt,t.timeFormatFrCa=dt,t.timeFormatFrFr=vt,t.timeFormatHeIl=yt,t.timeFormatHuHu=mt,t.timeFormatItIt=_t,t.timeFormatJaJp=gt,t.timeFormatKoKr=bt,t.timeFormatMkMk=wt,t.timeFormatNlNl=Tt,t.timeFormatPlPl=xt,t.timeFormatPtBr=St,t.timeFormatRuRu=Et,t.timeFormatSvSe=Mt,t.timeFormatZhCn=kt,t.isoFormat=Ct,t.isoParse=Pt})},function(t,e,r){function n(t,e,r){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===u.call(t)?i(t,e,r):"string"==typeof t?o(t,e,r):a(t,e,r)}function i(t,e,r){for(var n=0,i=t.length;n<i;n++)c.call(t,n)&&e.call(r,t[n],n,t)}function o(t,e,r){for(var n=0,i=t.length;n<i;n++)e.call(r,t.charAt(n),n,t)}function a(t,e,r){for(var n in t)c.call(t,n)&&e.call(r,t[n],n,t)}var s=r(20);t.exports=n;var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(t,e){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(e,function(){return this}())},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+p]=255&a,p+=d,a/=256,c-=8);t[r+p-d]|=128*v}},function(t,e){t.exports=["accent-height","accumulate","additive","alignment-baseline","alphabetic","amplitude","arabic-form","ascent","attributeName","attributeType","azimuth","baseFrequency","baseProfile","baseline-shift","bbox","begin","bias","by","calcMode","cap-height","class","clip","clip-path","clip-rule","clipPathUnits","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","contentScriptType","contentStyleType","cursor","cx","cy","d","descent","diffuseConstant","direction","display","divisor","dominant-baseline","dur","dx","dy","edgeMode","elevation","enable-background","end","exponent","externalResourcesRequired","fill","fill-opacity","fill-rule","filter","filterRes","filterUnits","flood-color","flood-opacity","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","format","from","fx","fy","g1","g2","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","glyphRef","gradientTransform","gradientUnits","hanging","height","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","ideographic","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lang","lengthAdjust","letter-spacing","lighting-color","limitingConeAngle","local","marker","marker-end","marker-mid","marker-start","markerHeight","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","max","media","method","min","mode","name","numOctaves","offset","onabort","onactivate","onbegin","onclick","onend","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onrepeat","onresize","onscroll","onunload","onzoom","opacity","operator","order","orient","orientation","origin","overflow","overline-position","overline-thickness","panose-1","path","pathLength","patternContentUnits","patternTransform","patternUnits","pointer-events","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","rendering-intent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shape-rendering","slope","spacing","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","string","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","surfaceScale","systemLanguage","tableValues","target","targetX","targetY","text-anchor","text-decoration","text-rendering","textLength","title","to","transform","type","u1","u2","underline-position","underline-thickness","unicode","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","values","version","vert-adv-y","vert-origin-x","vert-origin-y","viewBox","viewTarget","visibility","width","widths","word-spacing","writing-mode","x","x-height","x1","x2","xChannelSelector","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y","y1","y2","yChannelSelector","z","zoomAndPan","xmlns","xmlns:xlink"]},function(t,e){t.exports=["alignmentBaseline","baselineShift","clipPath","clipRule","color","colorInterpolation","colorProfile","colorRendering","dominantBaseline","enableBackground","cursor","direction","display","fill","fillOpacity","fillRule","filter","floodColor","floodOpacity","font","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","glyphOrientationHorizontal","glyphOrientationVertical","imageRendering","kerning","letterSpacing","lightingColor","marker","markerEnd","markerMid","markerStart","mask","opacity","overflow","pointerEvents","shapeRendering","stopColor","stopOpacity","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","textAnchor","textDecoration","textRendering","unicodeBidi","visibility","wordSpacing","writingMode"]},function(t,e){t.exports=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]},function(t,e,r){(function(t,r){function n(t,e){return t.set(e[0],e[1]),t}function i(t,e){return t.add(e),t}function o(t,e){for(var r=-1,n=t?t.length:0;++r<n&&e(t[r],r,t)!==!1;);return t}function a(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function s(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function u(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function c(t,e){return null==t?void 0:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function h(t,e){return function(r){return t(e(r))}}function p(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function d(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function v(){this.__data__=Ue?Ue(null):{}}function y(t){return this.has(t)&&delete this.__data__[t]}function m(t){var e=this.__data__;if(Ue){var r=e[t];return r===Ct?void 0:r}return we.call(e,t)?e[t]:void 0}function _(t){var e=this.__data__;return Ue?void 0!==e[t]:we.call(e,t)}function g(t,e){var r=this.__data__;return r[t]=Ue&&void 0===e?Ct:e,this}function b(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function w(){this.__data__=[]}function T(t){var e=this.__data__,r=H(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Pe.call(e,r,1),!0}function x(t){var e=this.__data__,r=H(e,t);return r<0?void 0:e[r][1]}function S(t){return H(this.__data__,t)>-1}function E(t,e){var r=this.__data__,n=H(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function k(){this.__data__={hash:new d,map:new(De||b),string:new d}}function j(t){return at(this,t).delete(t)}function C(t){return at(this,t).get(t)}function P(t){return at(this,t).has(t)}function A(t,e){return at(this,t).set(t,e),this}function F(t){this.__data__=new b(t)}function O(){this.__data__=new b}function R(t){return this.__data__.delete(t)}function D(t){return this.__data__.get(t)}function L(t){return this.__data__.has(t)}function N(t,e){var r=this.__data__;if(r instanceof b){var n=r.__data__;if(!De||n.length<jt-1)return n.push([t,e]),this;r=this.__data__=new M(n)}return r.set(t,e),this}function I(t,e){var r=We(t)||_t(t)?u(t.length,String):[],n=r.length,i=!!n;for(var o in t)!e&&!we.call(t,o)||i&&("length"==o||ft(o,n))||r.push(o);return r}function U(t,e,r){var n=t[e];we.call(t,e)&&mt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function H(t,e){for(var r=t.length;r--;)if(mt(t[r][0],e))return r;return-1}function z(t,e){return t&&nt(e,Et(e),t)}function q(t,e,r,n,i,a,s){var u;if(n&&(u=a?n(t,i,a,s):n(t)),void 0!==u)return u;if(!xt(t))return t;var c=We(t);if(c){if(u=ut(t),!e)return rt(t,u)}else{var f=Qe(t),h=f==Lt||f==Nt;if($e(t))return Q(t,e);if(f==Ht||f==At||h&&!a){if(l(t))return a?t:{};if(u=ct(h?{}:t),!e)return it(t,z(u,t))}else{if(!ue[f])return a?t:{};u=lt(t,f,q,e)}}s||(s=new F);var p=s.get(t);if(p)return p;if(s.set(t,u),!c)var d=r?ot(t):Et(t);return o(d||t,function(i,o){d&&(o=i,i=t[o]),U(u,o,q(i,e,r,n,o,t,s))}),u}function V(t){return xt(t)?je(t):{}}function B(t,e,r){var n=e(t);return We(t)?n:a(n,r(t))}function Y(t){return Te.call(t)}function X(t){if(!xt(t)||pt(t))return!1;var e=wt(t)||l(t)?xe:ae;return e.test(vt(t))}function G(t){if(!dt(t))return Oe(t);var e=[];for(var r in Object(t))we.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Q(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}function W(t){var e=new t.constructor(t.byteLength);return new Me(e).set(new Me(t)),e}function $(t,e){var r=e?W(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function J(t,e,r){var i=e?r(f(t),!0):f(t);return s(i,n,new t.constructor)}function Z(t){var e=new t.constructor(t.source,oe.exec(t));return e.lastIndex=t.lastIndex,e}function K(t,e,r){var n=e?r(p(t),!0):p(t);return s(n,i,new t.constructor)}function tt(t){return Xe?Object(Xe.call(t)):{}}function et(t,e){var r=e?W(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function rt(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function nt(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=n?n(r[a],t[a],a,r,t):void 0;U(r,a,void 0===s?t[a]:s)}return r}function it(t,e){return nt(t,Ge(t),e)}function ot(t){return B(t,Et,Ge)}function at(t,e){var r=t.__data__;return ht(e)?r["string"==typeof e?"string":"hash"]:r.map}function st(t,e){var r=c(t,e);return X(r)?r:void 0}function ut(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&we.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function ct(t){return"function"!=typeof t.constructor||dt(t)?{}:V(ke(t))}function lt(t,e,r,n){var i=t.constructor;switch(e){case Gt:return W(t);case Ot:case Rt:return new i(+t);case Qt:return $(t,n);case Wt:case $t:case Jt:case Zt:case Kt:case te:case ee:case re:case ne:return et(t,n);case It:return J(t,n,r);case Ut:case Bt:return new i(t);case qt:return Z(t);case Vt:return K(t,n,r);case Yt:return tt(t)}}function ft(t,e){return e=null==e?Pt:e,!!e&&("number"==typeof t||se.test(t))&&t>-1&&t%1==0&&t<e}function ht(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function pt(t){return!!ge&&ge in t}function dt(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||me;return t===r}function vt(t){if(null!=t){try{return be.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function yt(t){return q(t,!0,!0)}function mt(t,e){return t===e||t!==t&&e!==e}function _t(t){return bt(t)&&we.call(t,"callee")&&(!Ce.call(t,"callee")||Te.call(t)==At)}function gt(t){return null!=t&&Tt(t.length)&&!wt(t)}function bt(t){return St(t)&&gt(t)}function wt(t){var e=xt(t)?Te.call(t):"";return e==Lt||e==Nt}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Pt}function xt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function St(t){return!!t&&"object"==typeof t}function Et(t){return gt(t)?I(t):G(t)}function Mt(){return[]}function kt(){return!1}var jt=200,Ct="__lodash_hash_undefined__",Pt=9007199254740991,At="[object Arguments]",Ft="[object Array]",Ot="[object Boolean]",Rt="[object Date]",Dt="[object Error]",Lt="[object Function]",Nt="[object GeneratorFunction]",It="[object Map]",Ut="[object Number]",Ht="[object Object]",zt="[object Promise]",qt="[object RegExp]",Vt="[object Set]",Bt="[object String]",Yt="[object Symbol]",Xt="[object WeakMap]",Gt="[object ArrayBuffer]",Qt="[object DataView]",Wt="[object Float32Array]",$t="[object Float64Array]",Jt="[object Int8Array]",Zt="[object Int16Array]",Kt="[object Int32Array]",te="[object Uint8Array]",ee="[object Uint8ClampedArray]",re="[object Uint16Array]",ne="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,oe=/\w*$/,ae=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ue={};ue[At]=ue[Ft]=ue[Gt]=ue[Qt]=ue[Ot]=ue[Rt]=ue[Wt]=ue[$t]=ue[Jt]=ue[Zt]=ue[Kt]=ue[It]=ue[Ut]=ue[Ht]=ue[qt]=ue[Vt]=ue[Bt]=ue[Yt]=ue[te]=ue[ee]=ue[re]=ue[ne]=!0,ue[Dt]=ue[Lt]=ue[Xt]=!1;var ce="object"==typeof t&&t&&t.Object===Object&&t,le="object"==typeof self&&self&&self.Object===Object&&self,fe=ce||le||Function("return this")(),he="object"==typeof e&&e&&!e.nodeType&&e,pe=he&&"object"==typeof r&&r&&!r.nodeType&&r,de=pe&&pe.exports===he,ve=Array.prototype,ye=Function.prototype,me=Object.prototype,_e=fe["__core-js_shared__"],ge=function(){
var t=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),be=ye.toString,we=me.hasOwnProperty,Te=me.toString,xe=RegExp("^"+be.call(we).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=de?fe.Buffer:void 0,Ee=fe.Symbol,Me=fe.Uint8Array,ke=h(Object.getPrototypeOf,Object),je=Object.create,Ce=me.propertyIsEnumerable,Pe=ve.splice,Ae=Object.getOwnPropertySymbols,Fe=Se?Se.isBuffer:void 0,Oe=h(Object.keys,Object),Re=st(fe,"DataView"),De=st(fe,"Map"),Le=st(fe,"Promise"),Ne=st(fe,"Set"),Ie=st(fe,"WeakMap"),Ue=st(Object,"create"),He=vt(Re),ze=vt(De),qe=vt(Le),Ve=vt(Ne),Be=vt(Ie),Ye=Ee?Ee.prototype:void 0,Xe=Ye?Ye.valueOf:void 0;d.prototype.clear=v,d.prototype.delete=y,d.prototype.get=m,d.prototype.has=_,d.prototype.set=g,b.prototype.clear=w,b.prototype.delete=T,b.prototype.get=x,b.prototype.has=S,b.prototype.set=E,M.prototype.clear=k,M.prototype.delete=j,M.prototype.get=C,M.prototype.has=P,M.prototype.set=A,F.prototype.clear=O,F.prototype.delete=R,F.prototype.get=D,F.prototype.has=L,F.prototype.set=N;var Ge=Ae?h(Ae,Object):Mt,Qe=Y;(Re&&Qe(new Re(new ArrayBuffer(1)))!=Qt||De&&Qe(new De)!=It||Le&&Qe(Le.resolve())!=zt||Ne&&Qe(new Ne)!=Vt||Ie&&Qe(new Ie)!=Xt)&&(Qe=function(t){var e=Te.call(t),r=e==Ht?t.constructor:void 0,n=r?vt(r):void 0;if(n)switch(n){case He:return Qt;case ze:return It;case qe:return zt;case Ve:return Vt;case Be:return Xt}return e});var We=Array.isArray,$e=Fe||kt;r.exports=yt}).call(e,function(){return this}(),r(24)(t))},function(t,e){(function(e){function r(t,e,r){function i(e){var r=v,n=y;return v=y=void 0,S=e,_=t.apply(n,r)}function o(t){return S=t,g=setTimeout(l,e),E?i(t):_}function u(t){var r=t-x,n=t-S,i=e-r;return M?w(i,m-n):i}function c(t){var r=t-x,n=t-S;return void 0===x||r>=e||r<0||M&&n>=m}function l(){var t=T();return c(t)?f(t):void(g=setTimeout(l,u(t)))}function f(t){return g=void 0,k&&v?i(t):(v=y=void 0,_)}function h(){void 0!==g&&clearTimeout(g),S=0,v=x=y=g=void 0}function p(){return void 0===g?_:f(T())}function d(){var t=T(),r=c(t);if(v=arguments,y=this,x=t,r){if(void 0===g)return o(x);if(M)return g=setTimeout(l,e),i(x)}return void 0===g&&(g=setTimeout(l,e)),_}var v,y,m,_,g,x,S=0,E=!1,M=!1,k=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,n(r)&&(E=!!r.leading,M="maxWait"in r,m=M?b(a(r.maxWait)||0,e):m,k="trailing"in r?!!r.trailing:k),d.cancel=h,d.flush=p,d}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&g.call(t)==c}function a(t){if("number"==typeof t)return t;if(o(t))return u;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var r=h.test(t);return r||p.test(t)?d(t.slice(2),r?2:8):f.test(t)?u:+t}var s="Expected a function",u=NaN,c="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,p=/^0o[0-7]+$/i,d=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,m=v||y||Function("return this")(),_=Object.prototype,g=_.toString,b=Math.max,w=Math.min,T=function(){return m.Date.now()};t.exports=r}).call(e,function(){return this}())},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var p,d=[],v=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,r){var n=r(68),i=r(52),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return i(n(t).split("\n"),function(t){var r=t.indexOf(":"),i=n(t.slice(0,r)).toLowerCase(),a=n(t.slice(r+1));"undefined"==typeof e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},function(t,e,r){"use strict";function n(t){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return a(t,n,e);throw new Error("Expected varint not more than 10 bytes")}function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),4294967295^r?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),u(r,n,e),c(n,e)}function u(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}function c(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function l(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function f(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function _(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function w(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function T(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function x(t,e,r){for(var n="",i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>r)break;var u,c,l;1===s?o<128&&(a=o):2===s?(u=t[i+1],128===(192&u)&&(a=(31&o)<<6|63&u,a<=127&&(a=null))):3===s?(u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(a=(15&o)<<12|(63&u)<<6|63&c,(a<=2047||a>=55296&&a<=57343)&&(a=null))):4===s&&(u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(a=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,(a<=65535||a>=1114112)&&(a=null))),null===a?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),n+=String.fromCharCode(a),i+=s}return n}function S(t,e,r){for(var n,i,o=0;o<e.length;o++){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}t.exports=n;var E=r(54);n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var M=4294967296,k=1/M;n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=T(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*M;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+T(this.buf,this.pos+4)*M;return this.pos+=8,t},readFloat:function(){var t=E.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=E.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return r=n[this.pos++],e=127&r,r<128?e:(r=n[this.pos++],e|=(127&r)<<7,r<128?e:(r=n[this.pos++],e|=(127&r)<<14,r<128?e:(r=n[this.pos++],e|=(127&r)<<21,r<128?e:(r=n[this.pos],e|=(15&r)<<28,i(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=x(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=o(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),w(this.buf,t&-1,this.pos),w(this.buf,Math.floor(t*k),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),w(this.buf,t&-1,this.pos),w(this.buf,Math.floor(t*k),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t||0,t>268435455||t<0?void s(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=S(this.buf,t,this.pos);var r=this.pos-e;r>=128&&l(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),E.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),E.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&l(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,n.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,f,e)},writePackedSVarint:function(t,e){this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){this.writeMessage(t,v,e)},writePackedFloat:function(t,e){this.writeMessage(t,p,e)},writePackedDouble:function(t,e){this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){this.writeMessage(t,_,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,f,h,p,d=t[c].replace(a,"%20"),v=d.indexOf(n);v>=0?(l=d.substr(0,v),f=d.substr(v+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),r(o,h)?Array.isArray(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}},function(t,e){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(r(t))}).join(e):o+encodeURIComponent(r(t[i]))}).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""}},function(t,e,r){"use strict";e.decode=e.parse=r(64),e.encode=e.stringify=r(65)},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var p,d=[],v=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e){function r(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=r,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,r){var n;(function(t,i){!function(o){function a(t){throw RangeError(F[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function u(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(A,".");var i=t.split("."),o=s(i,e).join(".");return n+o}function c(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,r){var n=0;for(t=r?R(t/E):t>>1,t+=R(t/e);t>O*x>>1;n+=w)t=R(t/O);return R(n+(O+1)*t/(t+S))}function d(t){var e,r,n,i,o,s,u,c,h,d,v=[],y=t.length,m=0,_=k,g=M;for(r=t.lastIndexOf(j),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&a("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=m,s=1,u=w;i>=y&&a("invalid-input"),c=f(t.charCodeAt(i++)),(c>=w||c>R((b-m)/s))&&a("overflow"),m+=c*s,h=u<=g?T:u>=g+x?x:u-g,!(c<h);u+=w)d=w-h,s>R(b/d)&&a("overflow"),s*=d;e=v.length+1,g=p(m-o,e,0==o),R(m/e)>b-_&&a("overflow"),_+=R(m/e),m%=e,v.splice(m++,0,_)}return l(v)}function v(t){var e,r,n,i,o,s,u,l,f,d,v,y,m,_,g,S=[];for(t=c(t),y=t.length,e=k,r=0,o=M,s=0;s<y;++s)v=t[s],v<128&&S.push(D(v));for(n=i=S.length,i&&S.push(j);n<y;){for(u=b,s=0;s<y;++s)v=t[s],v>=e&&v<u&&(u=v);for(m=n+1,u-e>R((b-r)/m)&&a("overflow"),r+=(u-e)*m,e=u,s=0;s<y;++s)if(v=t[s],v<e&&++r>b&&a("overflow"),v==e){for(l=r,f=w;d=f<=o?T:f>=o+x?x:f-o,!(l<d);f+=w)g=l-d,_=w-d,S.push(D(h(d+g%_,0))),l=R(g/_);S.push(D(h(l,0))),o=p(r,m,n==i),r=0,++n}++r,++e}return S.join("")}function y(t){return u(t,function(t){return C.test(t)?d(t.slice(4).toLowerCase()):t})}function m(t){return u(t,function(t){return P.test(t)?"xn--"+v(t):t})}var _=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);_.global!==_&&_.window!==_&&_.self!==_||(o=_);var g,b=2147483647,w=36,T=1,x=26,S=38,E=700,M=72,k=128,j="-",C=/^xn--/,P=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=w-T,R=Math.floor,D=String.fromCharCode;g={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:v,toASCII:m,toUnicode:y},n=function(){return g}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(24)(t),function(){return this}())},function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&c(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return u(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function f(t){return null==t}var h=r(69);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(v),m=["'"].concat(y),_=["%","/","?",";","#"].concat(m),g=["/","?","#"],b=255,w=/^[a-z0-9A-Z_-]{0,63}$/,T=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=r(66);n.prototype.parse=function(t,e,r){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&S[i]||(n=n.substr(2),this.slashes=!0)}if(!S[i]&&(a||i&&!E[i])){for(var s=-1,c=0;c<g.length;c++){var l=n.indexOf(g[c]);l!==-1&&(s===-1||l<s)&&(s=l)}var f,d;d=s===-1?n.lastIndexOf("@"):n.lastIndexOf("@",s),d!==-1&&(f=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(f)),s=-1;for(var c=0;c<_.length;c++){var l=n.indexOf(_[c]);l!==-1&&(s===-1||l<s)&&(s=l)}s===-1&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),c=0,k=y.length;c<k;c++){var j=y[c];if(j&&!j.match(w)){for(var C="",P=0,A=j.length;P<A;P++)C+=j.charCodeAt(P)>127?"x":j[P];if(!C.match(w)){var F=y.slice(0,c),O=y.slice(c+1),R=j.match(T);R&&(F.push(R[1]),O.unshift(R[2])),O.length&&(n="/"+O.join(".")+n),this.hostname=F.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var D=this.hostname.split("."),L=[],c=0;c<D.length;++c){var N=D[c];L.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(N):N)}this.hostname=L.join(".")}var I=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+I,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!x[o])for(var c=0,k=m.length;c<k;c++){var H=m[c],z=encodeURIComponent(H);z===H&&(z=escape(H)),n=n.split(H).join(z)}var q=n.indexOf("#");q!==-1&&(this.hash=n.substr(q),n=n.slice(0,q));var V=n.indexOf("?");if(V!==-1?(this.search=n.substr(V),this.query=n.substr(V+1),e&&(this.query=M.parse(this.query)),n=n.slice(0,V)):e&&(this.search="",this.query={}),n&&(this.pathname=n),E[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",N=this.search||"";this.path=I+N}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=M.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),E[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!E[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||S[t.protocol])r.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||s||r.host&&t.pathname,p=h,d=r.pathname&&r.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],v=r.protocol&&!E[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),h=h&&(""===i[0]||""===d[0])),c)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=t.search,r.query=t.query;else if(!f(t.search)){if(v){r.hostname=r.host=d.shift();var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return r.search=t.search,r.query=t.query,l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var m=d.slice(-1)[0],_=(r.host||t.host)&&("."===m||".."===m)||""===m,g=0,b=d.length;b>=0;b--)m=d[b],"."==m?d.splice(b,1):".."===m?(d.splice(b,1),g++):g&&(d.splice(b,1),g--);if(!h&&!p)for(;g--;g)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),_&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(v){r.hostname=r.host=w?"":d.length?d.shift():"";var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return h=h||r.host&&d.length,h&&!w&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){t.exports.VectorTile=r(72),t.exports.VectorTileFeature=r(22),t.exports.VectorTileLayer=r(23)},function(t,e,r){"use strict";function n(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,r){if(3===t){var n=new o(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}var o=r(23);t.exports=n},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<t.length;r++)e(t[r])}function i(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function o(t,e,r){var n=t;return f(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=p(e,{uri:t}),n.callback=r,n}function a(t,e,r){return e=o(t,e,r),s(e)}function s(t){function e(){4===f.readyState&&o()}function r(){var t=void 0;if(t=f.response?f.response:f.responseText||u(f),w)try{t=JSON.parse(t)}catch(t){}return t}function n(t){return clearTimeout(v),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,c(t,l)}function o(){if(!d){var e;clearTimeout(v),e=t.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var n=l,i=null;return 0!==e?(n={body:r(),statusCode:e,method:m,headers:{},url:y,rawRequest:f},f.getAllResponseHeaders&&(n.headers=h(f.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),c(i,n,n.body)}}if("undefined"==typeof t.callback)throw new Error("callback argument missing");var s=!1,c=function(e,r,n){s||(s=!0,t.callback(e,r,n))},l={body:void 0,headers:{},statusCode:0,method:m,url:y,rawRequest:f},f=t.xhr||null;f||(f=t.cors||t.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var p,d,v,y=f.url=t.uri||t.url,m=f.method=t.method||"GET",_=t.body||t.data||null,g=f.headers=t.headers||{},b=!!t.sync,w=!1;if("json"in t&&(w=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),_=JSON.stringify(t.json===!0?_:t.json))),f.onreadystatechange=e,f.onload=o,f.onerror=n,f.onprogress=function(){},f.onabort=function(){d=!0},f.ontimeout=n,f.open(m,y,!b,t.username,t.password),b||(f.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(v=setTimeout(function(){if(!d){d=!0,f.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)}},t.timeout)),f.setRequestHeader)for(p in g)g.hasOwnProperty(p)&&f.setRequestHeader(p,g[p]);else if(t.headers&&!i(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(f.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(f),f.send(_),f}function u(t){if("document"===t.responseType)return t.responseXML;var e=204===t.status&&t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function c(){}var l=r(53),f=r(20),h=r(61),p=r(74);t.exports=a,a.XMLHttpRequest=l.XMLHttpRequest||c,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:l.XDomainRequest,n(["get","put","post","patch","head","delete"],function(t){
a["delete"===t?"del":t]=function(e,r,n){return r=o(e,r,n),r.method=t.toUpperCase(),s(r)}})},function(t,e){function r(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t}t.exports=r;var n=Object.prototype.hasOwnProperty}]);